<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mspace-checkins] r305 - in WebNotes/trunk: . images src/WebNotes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mspace-checkins/2004-October/index.html" >
   <LINK REL="made" HREF="mailto:mspace-checkins%40lists.berlios.de?Subject=Re%3A%20%5BMspace-checkins%5D%20r305%20-%20in%20WebNotes/trunk%3A%20.%20images%20src/WebNotes&In-Reply-To=%3C200410221508.i9MF8THs010672%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000040.html">
   <LINK REL="Next"  HREF="000042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mspace-checkins] r305 - in WebNotes/trunk: . images src/WebNotes</H1>
    <B>Sergio Rubio at BerliOS</B> 
    <A HREF="mailto:mspace-checkins%40lists.berlios.de?Subject=Re%3A%20%5BMspace-checkins%5D%20r305%20-%20in%20WebNotes/trunk%3A%20.%20images%20src/WebNotes&In-Reply-To=%3C200410221508.i9MF8THs010672%40sheep.berlios.de%3E"
       TITLE="[Mspace-checkins] r305 - in WebNotes/trunk: . images src/WebNotes">rubiojr at sheep.berlios.de
       </A><BR>
    <I>Fri Oct 22 17:08:29 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000040.html">[Mspace-checkins] r304 - in WebNotes/trunk: . src/WebNotes
</A></li>
        <LI>Next message: <A HREF="000042.html">[Mspace-checkins] r306 - in Muine.Sdk: . DataKits/Sqlite examples src src/Configuration src/Data src/Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41">[ date ]</a>
              <a href="thread.html#41">[ thread ]</a>
              <a href="subject.html#41">[ subject ]</a>
              <a href="author.html#41">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: rubiojr
Date: 2004-10-22 17:08:27 +0200 (Fri, 22 Oct 2004)
New Revision: 305

Added:
   WebNotes/trunk/images/page.png
Removed:
   WebNotes/trunk/src/WebNotes/Makefile.in
Modified:
   WebNotes/trunk/ChangeLog
   WebNotes/trunk/images/Makefile.am
   WebNotes/trunk/images/imagers.list
   WebNotes/trunk/src/WebNotes/WebViewer.cs
Log:
2004-10-22  Sergio Rubio  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mspace-checkins">sergio.rubio at hispalinux.es</A>&gt;

        * images/Makefile.am: Added a new image
        * images/imagers.list:
        * src/WebNotes/Makefile.in: removed crap
        * src/WebNotes/WebViewer.cs: Fixed close menu item duplication



Modified: WebNotes/trunk/ChangeLog
===================================================================
--- WebNotes/trunk/ChangeLog	2004-10-22 10:58:24 UTC (rev 304)
+++ WebNotes/trunk/ChangeLog	2004-10-22 15:08:27 UTC (rev 305)
@@ -1,5 +1,12 @@
 2004-10-22  Sergio Rubio  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mspace-checkins">sergio.rubio at hispalinux.es</A>&gt;
 
+	* images/Makefile.am: Added a new image
+	* images/imagers.list:
+	* src/WebNotes/Makefile.in: removed crap
+	* src/WebNotes/WebViewer.cs: Fixed close menu item duplication
+
+2004-10-22  Sergio Rubio  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mspace-checkins">sergio.rubio at hispalinux.es</A>&gt;
+
 	* NEWS: updated to new version
 	* configure.in: version bumped
 	* src/WebNotes/WebViewer.cs: Added close menu item to the tray.

Modified: WebNotes/trunk/images/Makefile.am
===================================================================
--- WebNotes/trunk/images/Makefile.am	2004-10-22 10:58:24 UTC (rev 304)
+++ WebNotes/trunk/images/Makefile.am	2004-10-22 15:08:27 UTC (rev 305)
@@ -1,4 +1,3 @@
 icondir = $(datadir)/pixmaps
 icon_DATA = webnotes-32.png webnotes-16.png
-
-EXTRA_DIST = $(icon_DATA)
+EXTRA_DIST = *.png

Modified: WebNotes/trunk/images/imagers.list
===================================================================
--- WebNotes/trunk/images/imagers.list	2004-10-22 10:58:24 UTC (rev 304)
+++ WebNotes/trunk/images/imagers.list	2004-10-22 15:08:27 UTC (rev 305)
@@ -1,3 +1,4 @@
 IMAGERS =
+IMAGERS += /resource:../../images/page.png,page.png
 IMAGERS += /resource:../../images/webnotes-16.png,webnotes-16.png
 IMAGERS += /resource:../../images/webnotes-32.png,webnotes-32.png

Added: WebNotes/trunk/images/page.png
===================================================================
(Binary files differ)


Property changes on: WebNotes/trunk/images/page.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Deleted: WebNotes/trunk/src/WebNotes/Makefile.in
===================================================================
--- WebNotes/trunk/src/WebNotes/Makefile.in	2004-10-22 10:58:24 UTC (rev 304)
+++ WebNotes/trunk/src/WebNotes/Makefile.in	2004-10-22 15:08:27 UTC (rev 305)
@@ -1,369 +0,0 @@
-# Makefile.in generated by automake 1.7.9 from Makefile.am.
-# @configure_input@
-
-# Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003
-# Free Software Foundation, Inc.
-# This Makefile.in is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
-# PARTICULAR PURPOSE.
-
<A HREF="https://lists.berlios.de/mailman/listinfo/mspace-checkins">- at SET_MAKE</A>@
-
-srcdir = @srcdir@
-top_srcdir = @top_srcdir@
-VPATH = @srcdir@
-pkgdatadir = $(datadir)/@PACKAGE@
-pkglibdir = $(libdir)/@PACKAGE@
-pkgincludedir = $(includedir)/@PACKAGE@
-top_builddir = ../..
-
-am__cd = CDPATH=&quot;$${ZSH_VERSION+.}$(PATH_SEPARATOR)&quot; &amp;&amp; cd
-INSTALL = @INSTALL@
-install_sh_DATA = $(install_sh) -c -m 644
-install_sh_PROGRAM = $(install_sh) -c
-install_sh_SCRIPT = $(install_sh) -c
-INSTALL_HEADER = $(INSTALL_DATA)
-transform = $(program_transform_name)
-NORMAL_INSTALL = :
-PRE_INSTALL = :
-POST_INSTALL = :
-NORMAL_UNINSTALL = :
-PRE_UNINSTALL = :
-POST_UNINSTALL = :
-host_triplet = @host@
-ACLOCAL = @ACLOCAL@
-ALLOCA = @ALLOCA@
-AMDEP_FALSE = @AMDEP_FALSE@
-AMDEP_TRUE = @AMDEP_TRUE@
-AMTAR = @AMTAR@
-AR = @AR@
-ATK_CFLAGS = @ATK_CFLAGS@
-ATK_LIBS = @ATK_LIBS@
-AUTOCONF = @AUTOCONF@
-AUTOHEADER = @AUTOHEADER@
-AUTOMAKE = @AUTOMAKE@
-AWK = @AWK@
-CC = @CC@
-CCDEPMODE = @CCDEPMODE@
-CFLAGS = @CFLAGS@
-CPP = @CPP@
-CPPFLAGS = @CPPFLAGS@
-CXX = @CXX@
-CXXCPP = @CXXCPP@
-CXXDEPMODE = @CXXDEPMODE@
-CXXFLAGS = @CXXFLAGS@
-CYGPATH_W = @CYGPATH_W@
-DEFS = @DEFS@
-DEPDIR = @DEPDIR@
-ECHO = @ECHO@
-ECHO_C = @ECHO_C@
-ECHO_N = @ECHO_N@
-ECHO_T = @ECHO_T@
-EGREP = @EGREP@
-EXEEXT = @EXEEXT@
-F77 = @F77@
-FFLAGS = @FFLAGS@
-GDK20_CFLAGS = @GDK20_CFLAGS@
-GDK20_LIBS = @GDK20_LIBS@
-GECKOSHARP_CFLAGS = @GECKOSHARP_CFLAGS@
-GECKOSHARP_LIBS = @GECKOSHARP_LIBS@
-GTKSHARP_CFLAGS = @GTKSHARP_CFLAGS@
-GTKSHARP_LIBS = @GTKSHARP_LIBS@
-INSTALL_DATA = @INSTALL_DATA@
-INSTALL_PROGRAM = @INSTALL_PROGRAM@
-INSTALL_SCRIPT = @INSTALL_SCRIPT@
-INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-LDFLAGS = @LDFLAGS@
-LIBOBJS = @LIBOBJS@
-LIBS = @LIBS@
-LIBTOOL = @LIBTOOL@
-LN_S = @LN_S@
-LTLIBOBJS = @LTLIBOBJS@
-MAINT = @MAINT@
-MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@
-MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@
-MAKEINFO = @MAKEINFO@
-MCS = @MCS@
-MCS_FLAGS = @MCS_FLAGS@
-MONO = @MONO@
-MONO_CFLAGS = @MONO_CFLAGS@
-MONO_FLAGS = @MONO_FLAGS@
-MONO_LIBS = @MONO_LIBS@
-OBJEXT = @OBJEXT@
-PACKAGE = @PACKAGE@
-PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
-PACKAGE_NAME = @PACKAGE_NAME@
-PACKAGE_STRING = @PACKAGE_STRING@
-PACKAGE_TARNAME = @PACKAGE_TARNAME@
-PACKAGE_VERSION = @PACKAGE_VERSION@
-PATH_SEPARATOR = @PATH_SEPARATOR@
-PKG_CONFIG = @PKG_CONFIG@
-RANLIB = @RANLIB@
-SET_MAKE = @SET_MAKE@
-SHELL = @SHELL@
-STRIP = @STRIP@
-VERSION = @VERSION@
-ac_ct_AR = @ac_ct_AR@
-ac_ct_CC = @ac_ct_CC@
-ac_ct_CXX = @ac_ct_CXX@
-ac_ct_F77 = @ac_ct_F77@
-ac_ct_RANLIB = @ac_ct_RANLIB@
-ac_ct_STRIP = @ac_ct_STRIP@
-am__fastdepCC_FALSE = @am__fastdepCC_FALSE@
-am__fastdepCC_TRUE = @am__fastdepCC_TRUE@
-am__fastdepCXX_FALSE = @am__fastdepCXX_FALSE@
-am__fastdepCXX_TRUE = @am__fastdepCXX_TRUE@
-am__include = @am__include@
-am__leading_dot = @am__leading_dot@
-am__quote = @am__quote@
-bindir = @bindir@
-build = @build@
-build_alias = @build_alias@
-build_cpu = @build_cpu@
-build_os = @build_os@
-build_vendor = @build_vendor@
-datadir = @datadir@
-exec_prefix = @exec_prefix@
-host = @host@
-host_alias = @host_alias@
-host_cpu = @host_cpu@
-host_os = @host_os@
-host_vendor = @host_vendor@
-includedir = @includedir@
-infodir = @infodir@
-install_sh = @install_sh@
-libdir = @libdir@
-libexecdir = @libexecdir@
-localstatedir = @localstatedir@
-mandir = @mandir@
-oldincludedir = @oldincludedir@
-prefix = @prefix@
-program_transform_name = @program_transform_name@
-sbindir = @sbindir@
-sharedstatedir = @sharedstatedir@
-sysconfdir = @sysconfdir@
-target_alias = @target_alias@
-CSSOURCES = ./WebViewer.cs ./WebNotes.cs
-IMAGERS = /resource:../../images/webnotes-16.png,webnotes-16.png /resource:../../images/webnotes-32.png,webnotes-32.png
-GLADERS = /resource:../../glade/MainWindow.glade,MainWindow.glade
-
-#MISCRS = /resource:../MuineSdk.ini,MuineSdk.ini
-REFERENCES = -pkg:gtk-sharp -pkg:gecko-sharp /r:../TrayIcon/TrayIcon.dll -pkg:glade-sharp
-
-bin_SCRIPTS = webnotes
-
-sdklibdir = $(prefix)/lib/WebNotes
-sdklib_DATA = WebNotes.exe
-
-EXTRA_DIST = sources.list webnotes.in $(CSSOURCES) WikiHome
-CLEANFILES = WebNotes.exe webnotes
-subdir = src/WebNotes
-ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
-CONFIG_HEADER = $(top_builddir)/config.h
-CONFIG_CLEAN_FILES = webnotes
-SCRIPTS = $(bin_SCRIPTS)
-
-DIST_SOURCES =
-DATA = $(sdklib_DATA)
-
-DIST_COMMON = $(srcdir)/../../glade/gladers.list \
-	$(srcdir)/../../images/imagers.list $(srcdir)/Makefile.in \
-	$(srcdir)/sources.list Makefile.am webnotes.in
-all: all-am
-
-.SUFFIXES:
-$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(srcdir)/sources.list $(srcdir)/../../images/imagers.list $(srcdir)/../../glade/gladers.list $(top_srcdir)/configure.in $(ACLOCAL_M4)
-	cd $(top_srcdir) &amp;&amp; \
-	  $(AUTOMAKE) --gnu  src/WebNotes/Makefile
-Makefile: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.in  $(top_builddir)/config.status
-	cd $(top_builddir) &amp;&amp; $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)
-webnotes: $(top_builddir)/config.status webnotes.in
-	cd $(top_builddir) &amp;&amp; $(SHELL) ./config.status $(subdir)/$@
-binSCRIPT_INSTALL = $(INSTALL_SCRIPT)
-install-binSCRIPTS: $(bin_SCRIPTS)
-	@$(NORMAL_INSTALL)
-	$(mkinstalldirs) $(DESTDIR)$(bindir)
-	@list='$(bin_SCRIPTS)'; for p in $$list; do \
-	  if test -f &quot;$$p&quot;; then d=; else d=&quot;$(srcdir)/&quot;; fi; \
-	  if test -f $$d$$p; then \
-	    f=`echo &quot;$$p&quot; | sed 's|^.*/||;$(transform)'`; \
-	    echo &quot; $(binSCRIPT_INSTALL) $$d$$p $(DESTDIR)$(bindir)/$$f&quot;; \
-	    $(binSCRIPT_INSTALL) $$d$$p $(DESTDIR)$(bindir)/$$f; \
-	  else :; fi; \
-	done
-
-uninstall-binSCRIPTS:
-	@$(NORMAL_UNINSTALL)
-	@list='$(bin_SCRIPTS)'; for p in $$list; do \
-	  f=`echo &quot;$$p&quot; | sed 's|^.*/||;$(transform)'`; \
-	  echo &quot; rm -f $(DESTDIR)$(bindir)/$$f&quot;; \
-	  rm -f $(DESTDIR)$(bindir)/$$f; \
-	done
-
-mostlyclean-libtool:
-	-rm -f *.lo
-
-clean-libtool:
-	-rm -rf .libs _libs
-
-distclean-libtool:
-	-rm -f libtool
-uninstall-info-am:
-sdklibDATA_INSTALL = $(INSTALL_DATA)
-install-sdklibDATA: $(sdklib_DATA)
-	@$(NORMAL_INSTALL)
-	$(mkinstalldirs) $(DESTDIR)$(sdklibdir)
-	@list='$(sdklib_DATA)'; for p in $$list; do \
-	  if test -f &quot;$$p&quot;; then d=; else d=&quot;$(srcdir)/&quot;; fi; \
-	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
-	  echo &quot; $(sdklibDATA_INSTALL) $$d$$p $(DESTDIR)$(sdklibdir)/$$f&quot;; \
-	  $(sdklibDATA_INSTALL) $$d$$p $(DESTDIR)$(sdklibdir)/$$f; \
-	done
-
-uninstall-sdklibDATA:
-	@$(NORMAL_UNINSTALL)
-	@list='$(sdklib_DATA)'; for p in $$list; do \
-	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
-	  echo &quot; rm -f $(DESTDIR)$(sdklibdir)/$$f&quot;; \
-	  rm -f $(DESTDIR)$(sdklibdir)/$$f; \
-	done
-tags: TAGS
-TAGS:
-
-ctags: CTAGS
-CTAGS:
-
-DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
-
-top_distdir = ../..
-distdir = $(top_distdir)/$(PACKAGE)-$(VERSION)
-
-distdir: $(DISTFILES)
-	$(mkinstalldirs) $(distdir)/./../../glade $(distdir)/./../../images
-	@srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`; \
-	topsrcdirstrip=`echo &quot;$(top_srcdir)&quot; | sed 's|.|.|g'`; \
-	list='$(DISTFILES)'; for file in $$list; do \
-	  case $$file in \
-	    $(srcdir)/*) file=`echo &quot;$$file&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
-	    $(top_srcdir)/*) file=`echo &quot;$$file&quot; | sed &quot;s|^$$topsrcdirstrip/|$(top_builddir)/|&quot;`;; \
-	  esac; \
-	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
-	  dir=`echo &quot;$$file&quot; | sed -e 's,/[^/]*$$,,'`; \
-	  if test &quot;$$dir&quot; != &quot;$$file&quot; &amp;&amp; test &quot;$$dir&quot; != &quot;.&quot;; then \
-	    dir=&quot;/$$dir&quot;; \
-	    $(mkinstalldirs) &quot;$(distdir)$$dir&quot;; \
-	  else \
-	    dir=''; \
-	  fi; \
-	  if test -d $$d/$$file; then \
-	    if test -d $(srcdir)/$$file &amp;&amp; test $$d != $(srcdir); then \
-	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
-	    fi; \
-	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
-	  else \
-	    test -f $(distdir)/$$file \
-	    || cp -p $$d/$$file $(distdir)/$$file \
-	    || exit 1; \
-	  fi; \
-	done
-check-am: all-am
-check: check-am
-all-am: Makefile $(SCRIPTS) $(DATA)
-
-installdirs:
-	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(sdklibdir)
-install: install-am
-install-exec: install-exec-am
-install-data: install-data-am
-uninstall: uninstall-am
-
-install-am: all-am
-	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
-
-installcheck: installcheck-am
-install-strip:
-	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=&quot;$(INSTALL_STRIP_PROGRAM)&quot; \
-	  install_sh_PROGRAM=&quot;$(INSTALL_STRIP_PROGRAM)&quot; INSTALL_STRIP_FLAG=-s \
-	  `test -z '$(STRIP)' || \
-	    echo &quot;INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'&quot;` install
-mostlyclean-generic:
-
-clean-generic:
-	-test -z &quot;$(CLEANFILES)&quot; || rm -f $(CLEANFILES)
-
-distclean-generic:
-	-rm -f $(CONFIG_CLEAN_FILES)
-
-maintainer-clean-generic:
-	@echo &quot;This command is intended for maintainers to use&quot;
-	@echo &quot;it deletes files that may require special tools to rebuild.&quot;
-clean: clean-am
-
-clean-am: clean-generic clean-libtool mostlyclean-am
-
-distclean: distclean-am
-	-rm -f Makefile
-distclean-am: clean-am distclean-generic distclean-libtool
-
-dvi: dvi-am
-
-dvi-am:
-
-info: info-am
-
-info-am:
-
-install-data-am: install-sdklibDATA
-
-install-exec-am: install-binSCRIPTS
-
-install-info: install-info-am
-
-install-man:
-
-installcheck-am:
-
-maintainer-clean: maintainer-clean-am
-	-rm -f Makefile
-maintainer-clean-am: distclean-am maintainer-clean-generic
-
-mostlyclean: mostlyclean-am
-
-mostlyclean-am: mostlyclean-generic mostlyclean-libtool
-
-pdf: pdf-am
-
-pdf-am:
-
-ps: ps-am
-
-ps-am:
-
-uninstall-am: uninstall-binSCRIPTS uninstall-info-am \
-	uninstall-sdklibDATA
-
-.PHONY: all all-am check check-am clean clean-generic clean-libtool \
-	distclean distclean-generic distclean-libtool distdir dvi \
-	dvi-am info info-am install install-am install-binSCRIPTS \
-	install-data install-data-am install-exec install-exec-am \
-	install-info install-info-am install-man install-sdklibDATA \
-	install-strip installcheck installcheck-am installdirs \
-	maintainer-clean maintainer-clean-generic mostlyclean \
-	mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
-	uninstall uninstall-am uninstall-binSCRIPTS uninstall-info-am \
-	uninstall-sdklibDATA
-
-
-WebNotes.exe: $(CSSOURCES) 
-	mcs /out:$@ $(CSSOURCES) /target:exe $(REFERENCES) $(IMAGERS) $(GLADERS) /resource:WikiHome,WikiHome
-
-all: WebNotes.exe 
-# Tell versions [3.59,3.63) of GNU make to not export all variables.
-# Otherwise a system limit (for SysV at least) may be exceeded.
-.NOEXPORT:

Modified: WebNotes/trunk/src/WebNotes/WebViewer.cs
===================================================================
--- WebNotes/trunk/src/WebNotes/WebViewer.cs	2004-10-22 10:58:24 UTC (rev 304)
+++ WebNotes/trunk/src/WebNotes/WebViewer.cs	2004-10-22 15:08:27 UTC (rev 305)
@@ -38,6 +38,8 @@
 	[Glade.Widget] private VBox mainBox;
 	[Glade.Widget] private Frame geckoBox;
 	[Glade.Widget] private OptionMenu optionMenu;
+	private string didiwikidir = Environment.GetEnvironmentVariable (&quot;HOME&quot;)
+				+ System.IO.Path.DirectorySeparatorChar + &quot;.didiwiki&quot;;
 	
 
 	public WebViewer () : base (WindowType.Toplevel)
@@ -68,7 +70,6 @@
 	    
 	    optionMenu.Changed += OptionChanged;
 	    BuildMenu ();
-	    optionMenu.Menu = currentMenu;
 	    int firstPage = list.IndexOf (&quot;WikiHome&quot;);
 	    if (firstPage != -1)
 		optionMenu.SetHistory ((uint)firstPage);
@@ -81,29 +82,44 @@
 	    list.Clear ();
 	    if (optionMenu.Menu != null)
 		optionMenu.Menu.Destroy ();
+	    currentMenu = new Menu ();
+	    currentMenu.AttachToWidget (trayIcon, null);
+	    
 	    Menu menu = new Menu ();
-	    string didiwikidir = Environment.GetEnvironmentVariable (&quot;HOME&quot;);
-	    didiwikidir += System.IO.Path.DirectorySeparatorChar + &quot;.didiwiki&quot;;
 	    string[] files = Directory.GetFiles (didiwikidir);
-	    foreach (string file in files)
+	    for (int i = 0; i &lt; files.Length ; i++)
 	    {
+		string file = files[i];
 		if (!file.EndsWith (&quot;.css&quot;))
 		{
 		    string fname = System.IO.Path.GetFileName (file);
 		    MenuItem item = new MenuItem (fname);
-		    item.Activated += ItemActivated;
+		    item.Data[&quot;File&quot;] = fname;
+		    item.Data[&quot;Position&quot;] = i;
+		    
+		    ImageMenuItem trayMenuItem = new ImageMenuItem (fname);
+		    Image img = new Image ();
+		    img.Pixbuf = new Gdk.Pixbuf (null, &quot;page.png&quot;);
+		    img.IconSize = (int)IconSize.Menu;
+		    trayMenuItem.Image = img;
+		    
+		    trayMenuItem.Activated += ItemActivated;
+		    trayMenuItem.Data [&quot;File&quot;] = fname;
+		    trayMenuItem.Data [&quot;Position&quot;] = i;
+		    
 		    menu.Append (item);
+		    currentMenu.Append (trayMenuItem);
 		    list.Add (fname);
 		}
 	    }
-	    menu.Append (new SeparatorMenuItem ());
+
+	    currentMenu.Append (new SeparatorMenuItem ());
 	    ImageMenuItem closeItem = new ImageMenuItem (&quot;_Quit&quot;);
 	    closeItem.Image = new Image (Gtk.Stock.Quit, Gtk.IconSize.Menu);
 	    closeItem.Activated += Quit;
-	    menu.Append (closeItem);
+	    currentMenu.Append (closeItem);
 	    optionMenu.Menu = menu;
 	    menu.ShowAll ();
-	    currentMenu = menu;
 	}
 
 	private void ButtonPressed (object obj, ButtonPressEventArgs args)
@@ -115,6 +131,7 @@
 			Present ();
 		    break;
 		case 3:
+		    currentMenu.ShowAll ();
 		    currentMenu.Popup (null, null, null, IntPtr.Zero, 3, Gtk.Global.CurrentEventTime);
 		    break;
 	    }
@@ -132,13 +149,7 @@
 
 	protected override bool OnDeleteEvent (Gdk.Event evt)
 	{
-	    /*bool retVal = base.OnDeleteEvent (evt);
-	    WebNotes.Exit ();
-	    return retVal;
 		Hide ();
-		return base.OnDeleteEvent (evt);
-		*/
-		Hide ();
 		return true;
 	}
 
@@ -153,9 +164,12 @@
 	    BuildMenu ();
 	}
 
-	private void ItemActivated (object obj, EventArgs args)
+	private void ItemActivated (object sender, EventArgs args)
 	{
-	          Present ();
+		Widget item = (Widget) sender;
+	    	wc.LoadUrl (&quot;<A HREF="http://localhost:8000/">http://localhost:8000/</A>&quot; + item.Data[&quot;File&quot;]);
+		optionMenu.SetHistory (UInt32.Parse (item.Data[&quot;Position&quot;].ToString ()));
+		Present ();
 	}
 	private void Quit (object sender, EventArgs args)
 	{


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000040.html">[Mspace-checkins] r304 - in WebNotes/trunk: . src/WebNotes
</A></li>
	<LI>Next message: <A HREF="000042.html">[Mspace-checkins] r306 - in Muine.Sdk: . DataKits/Sqlite examples src src/Configuration src/Data src/Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41">[ date ]</a>
              <a href="thread.html#41">[ thread ]</a>
              <a href="subject.html#41">[ subject ]</a>
              <a href="author.html#41">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mspace-checkins">More information about the Mspace-checkins
mailing list</a><br>
</body></html>
