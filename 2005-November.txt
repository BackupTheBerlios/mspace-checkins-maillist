From nestor at berlios.de  Tue Nov  1 17:24:33 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Tue, 1 Nov 2005 17:24:33 +0100
Subject: [Mspace-checkins] r567 - in BabuineComponentBuilder/trunk: . src/ComponentBuilder/Bo src/ComponentBuilder/Resources
Message-ID: <200511011624.jA1GOXc2017645@sheep.berlios.de>

Author: nestor
Date: 2005-11-01 17:24:32 +0100 (Tue, 01 Nov 2005)
New Revision: 567

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/mono-powered.png
Modified:
   BabuineComponentBuilder/trunk/BabuineComponentBuilder.build
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
Log:
Ya escupe, pero creo que hay un error a la hora del dise?\195?\177o.

Igual se a?\195?\177ade un campo nuevo para el modo de deploy del componente.



Modified: BabuineComponentBuilder/trunk/BabuineComponentBuilder.build
===================================================================
--- BabuineComponentBuilder/trunk/BabuineComponentBuilder.build	2005-10-30 14:23:55 UTC (rev 566)
+++ BabuineComponentBuilder/trunk/BabuineComponentBuilder.build	2005-11-01 16:24:32 UTC (rev 567)
@@ -76,6 +76,7 @@
             <resources>
                 <include name="**/*.glade"/>
                 <include name="**/*.template"/>
+                <include name="**/*.png"/>
             </resources>
         </csc>
         <tstamp/>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-10-30 14:23:55 UTC (rev 566)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-01 16:24:32 UTC (rev 567)
@@ -219,6 +219,64 @@
             return componentTable;
         }
         
+        private DirectoryInfo CreateSkeleton (ComponentSettingsDTO componentSettingsDTO) {
+            DirectoryInfo directoryInfo = new DirectoryInfo (preferencesDTO.OutputPath); 
+            DirectoryInfo componentDirectoryInfo = directoryInfo.CreateSubdirectory (componentSettingsDTO.ComponentName);
+            //Ahora crearemos uno para cada cosa, Bo, Forms, Dto, Exceptions ...
+            componentDirectoryInfo.CreateSubdirectory ("Bo");
+            componentDirectoryInfo.CreateSubdirectory ("Forms");
+            componentDirectoryInfo.CreateSubdirectory ("Dto");
+            componentDirectoryInfo.CreateSubdirectory ("Exceptions");
+            componentDirectoryInfo.CreateSubdirectory ("Resources");
+        
+            return componentDirectoryInfo;
+        }
+
+        private void WriteFiles (Hashtable componentTable, DirectoryInfo componentDirectory, ComponentSettingsDTO componentSettingsDTO) {
+            StringCollection stringCollection = new StringCollection ();
+            IEnumerator enumerator = componentTable.Keys.GetEnumerator ();
+            while (enumerator.MoveNext ()) {
+                stringCollection.Add ((string) enumerator.Current);
+            }
+           
+            enumerator = (stringCollection as IEnumerable).GetEnumerator ();
+            while (enumerator.MoveNext ()) {
+                string fileName = (string) enumerator.Current;
+                string content = (string) componentTable[fileName];
+                if (fileName.EndsWith ("ComponentModel.cs")) {
+                    WriteFileAt (fileName, componentDirectory.GetDirectories ("Bo")[0], content);
+                }
+                if (fileName.StartsWith (componentSettingsDTO.ClassExceptionManager)) {
+                    WriteFileAt (fileName, componentDirectory.GetDirectories ("Exceptions")[0], content);
+                }
+                IEnumerator auxEnumerator = (componentSettingsDTO.ViewsCollection as IEnumerable).GetEnumerator ();
+                while (auxEnumerator.MoveNext ()) {
+                    if (fileName.StartsWith ((string)auxEnumerator.Current)) {
+                        WriteFileAt (fileName, componentDirectory.GetDirectories ("Forms")[0], content);
+                    }
+                }
+            } 
+
+            if (preferencesDTO.GenerateBuildfile) {
+                enumerator.Reset ();
+                while (enumerator.MoveNext ()) {
+                    string fileName = (string) enumerator.Current;
+                    if (fileName.StartsWith (componentSettingsDTO.ComponentName) && fileName.EndsWith (".build")) {
+                        string content = (string) componentTable [fileName];
+                        WriteFileAt (fileName, componentDirectory, content);
+                    }
+                }
+            }
+        }
+
+        private void WriteFileAt (string fileName, DirectoryInfo directoryTo, string content) {
+            FileStream fileStream = new FileStream (Path.Combine (directoryTo.ToString (),fileName), FileMode.Create);
+            StreamWriter streamWriter = new StreamWriter (fileStream);
+            streamWriter.Write (content);
+            streamWriter.Close ();
+            fileStream.Close ();
+        }
+        
         [ComponentMethod ("ComponentBuilder.Forms.MainComponentBuilderForm", "ResponseGenerateComponent")]
         public void GenerateComponent (ComponentSettingsDTO componentSettingsDTO) {
             Hashtable templateTable = GetTemplates ();
@@ -231,11 +289,9 @@
             
             //Ahora solo resta guardarlo en archivos.  Con la ruta por
             //defecto que se haya configurado.
+            DirectoryInfo componentDirectory = CreateSkeleton (componentSettingsDTO); 
+            WriteFiles (componentTable, componentDirectory, componentSettingsDTO); 
             
-
-            //Se contemplar? tambi?n el escribir un fichero nant con la
-            //informaci?n necesaria.
-            
             IDictionaryEnumerator enumerator = componentTable.GetEnumerator ();
             while (enumerator.MoveNext ()) {
                 Console.WriteLine (enumerator.Key + "\n" + enumerator.Value);

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/mono-powered.png
===================================================================
(Binary files differ)


Property changes on: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/mono-powered.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From nestor at berlios.de  Tue Nov  1 19:45:21 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Tue, 1 Nov 2005 19:45:21 +0100
Subject: [Mspace-checkins] r568 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Bo Dto Resources
Message-ID: <200511011845.jA1IjLSZ004487@sheep.berlios.de>

Author: nestor
Date: 2005-11-01 19:45:14 +0100 (Tue, 01 Nov 2005)
New Revision: 568

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/PreferencesDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:
NAnt se a?\195?\177adir?\195?\161 mas tarde, cuando solucione el dise?\195?\177o del modo de deploy para un
componente.

Se trata de cortar el siguiente comportamiento; un componente se puede
distribuir el solo; una aplicaci?\195?\179n puede tener uno o m?\195?\161s componentes.  La gracia
radicar?\195?\173a en poder a?\195?\177adir un componente a un proyecto, y adem?\195?\161s poder crear
proyectos nuevos con varios componentes; y aqui ser?\195?\173a d?\195?\179nde ir?\195?\173a bien colocado
el fichero build de NAnt.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-01 16:24:32 UTC (rev 567)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-01 18:45:14 UTC (rev 568)
@@ -292,10 +292,12 @@
             DirectoryInfo componentDirectory = CreateSkeleton (componentSettingsDTO); 
             WriteFiles (componentTable, componentDirectory, componentSettingsDTO); 
             
+            /**
             IDictionaryEnumerator enumerator = componentTable.GetEnumerator ();
             while (enumerator.MoveNext ()) {
                 Console.WriteLine (enumerator.Key + "\n" + enumerator.Value);
             }
+            */
         }
     }
 }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/PreferencesDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/PreferencesDTO.cs	2005-11-01 16:24:32 UTC (rev 567)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/PreferencesDTO.cs	2005-11-01 18:45:14 UTC (rev 568)
@@ -11,11 +11,15 @@
         public PreferencesDTO () {
             OutputPath = String.Empty;
             PrefixNamespace = String.Empty;
-            GenerateBuildfile = true;
+            //GenerateBuildfile = true;
+            GenerateBuildfile = false;
         }
         
         public bool GenerateBuildfile {
-            get {return generateBuildfile;}
+            get {
+                //return generateBuildfile;
+                return false;
+            }
             set {generateBuildfile = value;}
         }
         

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-01 16:24:32 UTC (rev 567)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-01 18:45:14 UTC (rev 568)
@@ -1260,7 +1260,6 @@
 
 	  <child>
 	    <widget class="GtkLabel" id="label15">
-	      <property name="visible">True</property>
 	      <property name="label" translatable="yes">&lt;b&gt;Generate NAnt Buildfile: &lt;/b&gt;</property>
 	      <property name="use_underline">False</property>
 	      <property name="use_markup">True</property>
@@ -1330,8 +1329,6 @@
 
 	  <child>
 	    <widget class="GtkCheckButton" id="generateCheck">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
 	      <property name="label" translatable="yes">Generate</property>
 	      <property name="use_underline">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-01 16:24:32 UTC (rev 567)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-01 18:45:14 UTC (rev 568)
@@ -1330,8 +1330,7 @@
 
 	  <child>
 	    <widget class="GtkCheckButton" id="generateCheck">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
+	      <property name="sensitive">False</property>
 	      <property name="label" translatable="yes">Generate</property>
 	      <property name="use_underline">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>



From nestor at berlios.de  Thu Nov  3 00:29:31 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Thu, 3 Nov 2005 00:29:31 +0100
Subject: [Mspace-checkins] r569 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Bo Dto Forms Resources
Message-ID: <200511022329.jA2NTVit008871@sheep.berlios.de>

Author: nestor
Date: 2005-11-03 00:29:31 +0100 (Thu, 03 Nov 2005)
New Revision: 569

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/TemplateNamesDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-01 18:45:14 UTC (rev 568)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-02 23:29:31 UTC (rev 569)
@@ -76,6 +76,7 @@
             hashtable = AddToTemplateTable (hashtable, TemplateNamesDTO.ResponseMethod);
             hashtable = AddToTemplateTable (hashtable, TemplateNamesDTO.ViewHandler);
             hashtable = AddToTemplateTable (hashtable, TemplateNamesDTO.NAntBuildfile);
+            //hashtable = AddToTemplateTable (hashtable, TemplateNamesDTO.AssemblyInfo);
             return hashtable;
         }
 
@@ -92,6 +93,12 @@
             componentTable.Add (componentSettingsDTO.ComponentName+"ComponentModel.cs", templateTable[TemplateNamesDTO.BusinessObject]);
             //A?adimos el gestor de exceptions
             componentTable.Add (componentSettingsDTO.ClassExceptionManager+".cs", templateTable[TemplateNamesDTO.ExceptionManager]); 
+            //A?adimos el manifiesto.
+            /**
+            StringBuilder manifestBuilder = new StringBuilder (TemplateNamesDTO.AssemblyInfo);
+            manifestBuilder = manifestBuilder.Replace ("template", "cs");
+            componentTable.Add (manifestBuilder.ToString (), templateTable[TemplateNamesDTO.AssemblyInfo]);
+            */
             //A?aidmos las vistas
             StringEnumerator enumerator = componentSettingsDTO.ViewsCollection.GetEnumerator ();
             while (enumerator.MoveNext ()) {
@@ -249,6 +256,9 @@
                 if (fileName.StartsWith (componentSettingsDTO.ClassExceptionManager)) {
                     WriteFileAt (fileName, componentDirectory.GetDirectories ("Exceptions")[0], content);
                 }
+                if (fileName.StartsWith ("AssemblyInfo")) {
+                    WriteFileAt (fileName, componentDirectory, content);
+                }
                 IEnumerator auxEnumerator = (componentSettingsDTO.ViewsCollection as IEnumerable).GetEnumerator ();
                 while (auxEnumerator.MoveNext ()) {
                     if (fileName.StartsWith ((string)auxEnumerator.Current)) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/TemplateNamesDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/TemplateNamesDTO.cs	2005-11-01 18:45:14 UTC (rev 568)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/TemplateNamesDTO.cs	2005-11-02 23:29:31 UTC (rev 569)
@@ -10,5 +10,6 @@
         internal const string ResponseMethod = "ResponseMethod.template";
         internal const string ViewHandler = "ViewHandler.template";
         internal const string NAntBuildfile = "NAnt.template";
+        internal const string AssemblyInfo = "AssemblyInfo.template";
     }
 }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-01 18:45:14 UTC (rev 568)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-02 23:29:31 UTC (rev 569)
@@ -9,7 +9,7 @@
 
 namespace ComponentBuilder.Forms {
     public sealed class MainComponentBuilderForm : IViewHandler {
-        Glade.XML gxml, newViewDialog, newMethodDialog, newParameterDialog, preferencesDialog = null;
+        Glade.XML gxml, newViewDialog, newMethodDialog, newParameterDialog, preferencesDialog, aboutDialog = null;
         [Widget] Statusbar statusbar1;
         [Widget] TreeView viewsTreeView, methodsTreeView;
         [Widget] Entry componentNameEntry, exceptionManagerClassNameEntry;
@@ -113,6 +113,28 @@
             Application.Quit ();
         }
 
+        /*Menu Bar*/
+        private void OnMenuNewActivate (object sender, EventArgs args) {
+        }
+
+        private void OnMenuOpenActivate (object sender, EventArgs args) {
+        }
+
+        private void OnMenuSaveActivate (object sender, EventArgs args) {
+        }
+
+        private void OnMenuSaveAsActivate (object sender, EventArgs args) {
+        }
+
+        private void OnMenuExitActivate (object sender, EventArgs args) {
+            Application.Quit ();
+        }
+        
+        private void OnMenuAboutActivate (object sender, EventArgs args) {
+            aboutDialog = new Glade.XML (null, "MainComponentBuilderForm.glade", "aboutDialog", null);
+            aboutDialog = null;
+        }
+
         /*Toolbar*/
 
         private void OnNewComponentClicked (object sender, EventArgs args) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-01 18:45:14 UTC (rev 568)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-02 23:29:31 UTC (rev 569)
@@ -29,7 +29,155 @@
       <property name="spacing">0</property>
 
       <child>
-	<placeholder/>
+	<widget class="GtkMenuBar" id="menubar1">
+	  <property name="visible">True</property>
+	  <property name="pack_direction">GTK_PACK_DIRECTION_LTR</property>
+	  <property name="child_pack_direction">GTK_PACK_DIRECTION_LTR</property>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem1">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Archivo</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem1_menu">
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="nuevo1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuNewActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="abrir1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-open</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuOpenActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="guardar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-save</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuSaveActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="guardar_como1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-save-as</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuSaveAsActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkSeparatorMenuItem" id="separatormenuitem1">
+		      <property name="visible">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="salir1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-quit</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuExitActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem2">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Editar</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem2_menu">
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="cortar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-cut</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="copiar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-copy</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="pegar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-paste</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="borrar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem3">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Ver</property>
+	      <property name="use_underline">True</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem4">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">A_yuda</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem4_menu">
+
+		  <child>
+		    <widget class="GtkMenuItem" id="acerca_de1">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">A_cerca de</property>
+		      <property name="use_underline">True</property>
+		      <signal name="activate" handler="OnMenuAboutActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">False</property>
+	  <property name="fill">False</property>
+	</packing>
       </child>
 
       <child>
@@ -1205,7 +1353,7 @@
 	  <child>
 	    <widget class="GtkLabel" id="label13">
 	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Default Output Path: &lt;/b&gt;</property>
+	      <property name="label" translatable="yes">&lt;b&gt;Output Path: &lt;/b&gt;</property>
 	      <property name="use_underline">False</property>
 	      <property name="use_markup">True</property>
 	      <property name="justify">GTK_JUSTIFY_LEFT</property>
@@ -1439,4 +1587,21 @@
   </child>
 </widget>
 
+<widget class="GtkAboutDialog" id="aboutDialog">
+  <property name="visible">True</property>
+  <property name="destroy_with_parent">True</property>
+  <property name="name" translatable="yes">Babuine Component Builder</property>
+  <property name="copyright" translatable="yes">(c) 2005 N?stor Salceda Alonso
+nestor.salceda at gmail.com</property>
+  <property name="comments" translatable="yes">Un constructor para la generaci?n de esqueletos de componentes babuine.</property>
+  <property name="license" translatable="yes">LGPL License</property>
+  <property name="wrap_license">True</property>
+  <property name="website">http://wizito.is-a-geek.net</property>
+  <property name="website_label" translatable="yes">Babuine Home Page</property>
+  <property name="authors">N?stor Salceda Alonso</property>
+  <property name="documenters">N?stor Salceda Alonso</property>
+  <property name="artists">N?stor Salceda Alonso</property>
+  <property name="translator_credits" translatable="yes" comments="TRANSLATORS: Replace this string with your names, one name per line.">N?stor Salceda Alonso</property>
+</widget>
+
 </glade-interface>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-01 18:45:14 UTC (rev 568)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-02 23:29:31 UTC (rev 569)
@@ -29,7 +29,155 @@
       <property name="spacing">0</property>
 
       <child>
-	<placeholder/>
+	<widget class="GtkMenuBar" id="menubar1">
+	  <property name="visible">True</property>
+	  <property name="pack_direction">GTK_PACK_DIRECTION_LTR</property>
+	  <property name="child_pack_direction">GTK_PACK_DIRECTION_LTR</property>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem1">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Archivo</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem1_menu">
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="nuevo1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuNewActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="abrir1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-open</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuOpenActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="guardar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-save</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuSaveActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="guardar_como1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-save-as</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuSaveAsActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkSeparatorMenuItem" id="separatormenuitem1">
+		      <property name="visible">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="salir1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-quit</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="OnMenuExitActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem2">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Editar</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem2_menu">
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="cortar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-cut</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="copiar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-copy</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="pegar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-paste</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkImageMenuItem" id="borrar1">
+		      <property name="visible">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem3">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">_Ver</property>
+	      <property name="use_underline">True</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkMenuItem" id="menuitem4">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">A_yuda</property>
+	      <property name="use_underline">True</property>
+
+	      <child>
+		<widget class="GtkMenu" id="menuitem4_menu">
+
+		  <child>
+		    <widget class="GtkMenuItem" id="acerca_de1">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">A_cerca de</property>
+		      <property name="use_underline">True</property>
+		      <signal name="activate" handler="OnMenuAboutActivate" last_modification_time="Wed, 02 Nov 2005 23:23:31 GMT"/>
+		    </widget>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">False</property>
+	  <property name="fill">False</property>
+	</packing>
       </child>
 
       <child>
@@ -1205,7 +1353,7 @@
 	  <child>
 	    <widget class="GtkLabel" id="label13">
 	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Default Output Path: &lt;/b&gt;</property>
+	      <property name="label" translatable="yes">&lt;b&gt;Output Path: &lt;/b&gt;</property>
 	      <property name="use_underline">False</property>
 	      <property name="use_markup">True</property>
 	      <property name="justify">GTK_JUSTIFY_LEFT</property>
@@ -1260,7 +1408,6 @@
 
 	  <child>
 	    <widget class="GtkLabel" id="label15">
-	      <property name="visible">True</property>
 	      <property name="label" translatable="yes">&lt;b&gt;Generate NAnt Buildfile: &lt;/b&gt;</property>
 	      <property name="use_underline">False</property>
 	      <property name="use_markup">True</property>
@@ -1330,7 +1477,6 @@
 
 	  <child>
 	    <widget class="GtkCheckButton" id="generateCheck">
-	      <property name="sensitive">False</property>
 	      <property name="label" translatable="yes">Generate</property>
 	      <property name="use_underline">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
@@ -1441,4 +1587,21 @@
   </child>
 </widget>
 
+<widget class="GtkAboutDialog" id="aboutdialog1">
+  <property name="visible">True</property>
+  <property name="destroy_with_parent">True</property>
+  <property name="name" translatable="yes">Babuine Component Builder</property>
+  <property name="copyright" translatable="yes">(c) 2005 N?stor Salceda Alonso
+nestor.salceda at gmail.com</property>
+  <property name="comments" translatable="yes">Un constructor para la generaci?n de esqueletos de componentes babuine.</property>
+  <property name="license" translatable="yes">LGPL License</property>
+  <property name="wrap_license">True</property>
+  <property name="website">http://wizito.is-a-geek.net</property>
+  <property name="website_label" translatable="yes">Babuine Home Page</property>
+  <property name="authors">N?stor Salceda Alonso</property>
+  <property name="documenters">N?stor Salceda Alonso</property>
+  <property name="artists">N?stor Salceda Alonso</property>
+  <property name="translator_credits" translatable="yes" comments="TRANSLATORS: Replace this string with your names, one name per line.">N?stor Salceda Alonso</property>
+</widget>
+
 </glade-interface>



From nestor at berlios.de  Sat Nov  5 21:01:15 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Sat, 5 Nov 2005 21:01:15 +0100
Subject: [Mspace-checkins] r570 - BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources
Message-ID: <200511052001.jA5K1FQh006064@sheep.berlios.de>

Author: nestor
Date: 2005-11-05 21:01:14 +0100 (Sat, 05 Nov 2005)
New Revision: 570

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:
Corregido el fallo de disenyo procedo a reimplementar este componente.
-Empezaremos refactorizando DTO.
-Luego haremos lo propio con el form.
-Finalmente haremos el caso de uso del BO.


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-02 23:29:31 UTC (rev 569)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-05 20:01:14 UTC (rev 570)
@@ -1587,7 +1587,7 @@
   </child>
 </widget>
 
-<widget class="GtkAboutDialog" id="aboutdialog1">
+<widget class="GtkAboutDialog" id="aboutDialog">
   <property name="visible">True</property>
   <property name="destroy_with_parent">True</property>
   <property name="name" translatable="yes">Babuine Component Builder</property>



From nestor at berlios.de  Sat Nov  5 21:19:09 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Sat, 5 Nov 2005 21:19:09 +0100
Subject: [Mspace-checkins] r571 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Bo Dto Forms Resources/Templates
Message-ID: <200511052019.jA5KJ9Aq001994@sheep.berlios.de>

Author: nestor
Date: 2005-11-05 21:19:04 +0100 (Sat, 05 Nov 2005)
New Revision: 571

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/Templates/AssemblyInfo.template
Removed:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ConfigurationDTO.cs
Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
Log:
Refactorizaci?\195?\179n completa.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -87,12 +87,12 @@
             return hashtable;
         }
 
-        private Hashtable InitComponentTable (ComponentSettingsDTO componentSettingsDTO, Hashtable templateTable) {
+        private Hashtable InitComponentTable (ComponentDTO componentDTO, Hashtable templateTable) {
             Hashtable componentTable = new Hashtable ();
             //Key fileName without path, string value. 
-            componentTable.Add (componentSettingsDTO.ComponentName+"ComponentModel.cs", templateTable[TemplateNamesDTO.BusinessObject]);
+            componentTable.Add (componentDTO.ComponentName+"ComponentModel.cs", templateTable[TemplateNamesDTO.BusinessObject]);
             //A?adimos el gestor de exceptions
-            componentTable.Add (componentSettingsDTO.ClassExceptionManager+".cs", templateTable[TemplateNamesDTO.ExceptionManager]); 
+            componentTable.Add (componentDTO.ClassExceptionManager+".cs", templateTable[TemplateNamesDTO.ExceptionManager]); 
             //A?adimos el manifiesto.
             /**
             StringBuilder manifestBuilder = new StringBuilder (TemplateNamesDTO.AssemblyInfo);
@@ -100,19 +100,19 @@
             componentTable.Add (manifestBuilder.ToString (), templateTable[TemplateNamesDTO.AssemblyInfo]);
             */
             //A?aidmos las vistas
-            StringEnumerator enumerator = componentSettingsDTO.ViewsCollection.GetEnumerator ();
+            StringEnumerator enumerator = componentDTO.ViewCollection.GetEnumerator ();
             while (enumerator.MoveNext ()) {
                 string currentView = enumerator.Current;
                 componentTable.Add (currentView + ".cs", templateTable[TemplateNamesDTO.ViewHandler]); 
             }
             //A?adimos el file nant.
             if (preferencesDTO.GenerateBuildfile) {
-                componentTable.Add (componentSettingsDTO.ComponentName+".build", templateTable[TemplateNamesDTO.NAntBuildfile]);
+                componentTable.Add (componentDTO.ComponentName+".build", templateTable[TemplateNamesDTO.NAntBuildfile]);
             }
             return componentTable;
         }
 
-        private Hashtable FillTable (ComponentSettingsDTO componentSettingsDTO, Hashtable componentTable) {
+        private Hashtable FillTable (ComponentDTO componentDTO, Hashtable componentTable) {
             StringCollection stringCollection = new StringCollection ();
             IEnumerator enumerator = componentTable.Keys.GetEnumerator ();
             while (enumerator.MoveNext ()) {
@@ -124,10 +124,10 @@
                 string currentKey = (string)enumerator.Current;
                 StringBuilder stringBuilder = new StringBuilder ((string)componentTable[currentKey]);
                 if (currentKey.EndsWith (".build")) 
-                    stringBuilder = stringBuilder.Replace (TagValuesDTO.NAntComponentName, componentSettingsDTO.ComponentName);
+                    stringBuilder = stringBuilder.Replace (TagValuesDTO.NAntComponentName, componentDTO.ComponentName);
                 else 
-                    stringBuilder = stringBuilder.Replace (TagValuesDTO.ComponentName, componentSettingsDTO.ComponentName);
-                stringBuilder = stringBuilder.Replace (TagValuesDTO.ExceptionManager, componentSettingsDTO.ClassExceptionManager);
+                    stringBuilder = stringBuilder.Replace (TagValuesDTO.ComponentName, componentDTO.ComponentName);
+                stringBuilder = stringBuilder.Replace (TagValuesDTO.ExceptionManager, componentDTO.ClassExceptionManager);
                 if (preferencesDTO.PrefixNamespace.Length != 0) {
                     //Lo setear? y a?adir? un punto.
                     StringBuilder prefixBuilder = new StringBuilder (preferencesDTO.PrefixNamespace);
@@ -139,7 +139,7 @@
                     stringBuilder = stringBuilder.Replace (TagValuesDTO.Prefix, preferencesDTO.PrefixNamespace);
                 }
                 //Ahora para las vistas se discernira para cada una.
-                foreach (String view in componentSettingsDTO.ViewsCollection) { 
+                foreach (String view in componentDTO.ViewCollection) { 
                     if (currentKey.StartsWith (view)) {
                         stringBuilder = stringBuilder.Replace (TagValuesDTO.ViewName, view);
                     }
@@ -149,9 +149,9 @@
             return componentTable;
         }
         
-        private Hashtable FillMethods (ComponentSettingsDTO componentSettingsDTO, Hashtable componentTable, Hashtable templateTable) {
+        private Hashtable FillMethods (ComponentDTO componentDTO, Hashtable componentTable, Hashtable templateTable) {
             StringBuilder stringBuilder = new StringBuilder ();
-            foreach (MethodDTO methodDTO in componentSettingsDTO.MethodsCollection) {
+            foreach (MethodDTO methodDTO in componentDTO.MethodCollection) {
                 stringBuilder = stringBuilder.Append (templateTable[TemplateNamesDTO.MethodBody]);
                 stringBuilder = stringBuilder.Replace (TagValuesDTO.ReturnType, methodDTO.ReturnType);
                 stringBuilder = stringBuilder.Replace (TagValuesDTO.MethodName, methodDTO.MethodName);
@@ -180,7 +180,7 @@
                     //No lo seteara el prefix namespace
                     stringBuilder = stringBuilder.Replace (TagValuesDTO.Prefix, preferencesDTO.PrefixNamespace);
                 } 
-                stringBuilder = stringBuilder.Replace (TagValuesDTO.ComponentName, componentSettingsDTO.ComponentName);
+                stringBuilder = stringBuilder.Replace (TagValuesDTO.ComponentName, componentDTO.ComponentName);
             
                 stringBuilder = stringBuilder.Replace (TagValuesDTO.ViewName, methodDTO.ViewToResponse);
                 stringBuilder = stringBuilder.Replace (TagValuesDTO.ResponseName, methodDTO.ResponseMethod);
@@ -210,10 +210,10 @@
             return componentTable;
         }
         
-        private Hashtable FillResponses (ComponentSettingsDTO componentSettingsDTO, Hashtable componentTable, Hashtable templateTable) {
-            foreach (string viewName in componentSettingsDTO.ViewsCollection) {
+        private Hashtable FillResponses (ComponentDTO componentDTO, Hashtable componentTable, Hashtable templateTable) {
+            foreach (string viewName in componentDTO.ViewCollection) {
                 StringBuilder responseBuilder = new StringBuilder ();
-                foreach (MethodDTO methodDTO in componentSettingsDTO.MethodsCollection) {
+                foreach (MethodDTO methodDTO in componentDTO.MethodCollection) {
                     if (methodDTO.ViewToResponse.Equals (viewName)) {
                         responseBuilder = responseBuilder.Append (templateTable[TemplateNamesDTO.ResponseMethod]);
                         responseBuilder = responseBuilder.Replace (TagValuesDTO.ResponseName, methodDTO.ResponseMethod);
@@ -226,9 +226,9 @@
             return componentTable;
         }
         
-        private DirectoryInfo CreateSkeleton (ComponentSettingsDTO componentSettingsDTO) {
+        private DirectoryInfo CreateSkeleton (ComponentDTO componentDTO) {
             DirectoryInfo directoryInfo = new DirectoryInfo (preferencesDTO.OutputPath); 
-            DirectoryInfo componentDirectoryInfo = directoryInfo.CreateSubdirectory (componentSettingsDTO.ComponentName);
+            DirectoryInfo componentDirectoryInfo = directoryInfo.CreateSubdirectory (componentDTO.ComponentName);
             //Ahora crearemos uno para cada cosa, Bo, Forms, Dto, Exceptions ...
             componentDirectoryInfo.CreateSubdirectory ("Bo");
             componentDirectoryInfo.CreateSubdirectory ("Forms");
@@ -239,7 +239,7 @@
             return componentDirectoryInfo;
         }
 
-        private void WriteFiles (Hashtable componentTable, DirectoryInfo componentDirectory, ComponentSettingsDTO componentSettingsDTO) {
+        private void WriteFiles (Hashtable componentTable, DirectoryInfo componentDirectory, ComponentDTO componentDTO) {
             StringCollection stringCollection = new StringCollection ();
             IEnumerator enumerator = componentTable.Keys.GetEnumerator ();
             while (enumerator.MoveNext ()) {
@@ -253,13 +253,13 @@
                 if (fileName.EndsWith ("ComponentModel.cs")) {
                     WriteFileAt (fileName, componentDirectory.GetDirectories ("Bo")[0], content);
                 }
-                if (fileName.StartsWith (componentSettingsDTO.ClassExceptionManager)) {
+                if (fileName.StartsWith (componentDTO.ClassExceptionManager)) {
                     WriteFileAt (fileName, componentDirectory.GetDirectories ("Exceptions")[0], content);
                 }
                 if (fileName.StartsWith ("AssemblyInfo")) {
                     WriteFileAt (fileName, componentDirectory, content);
                 }
-                IEnumerator auxEnumerator = (componentSettingsDTO.ViewsCollection as IEnumerable).GetEnumerator ();
+                IEnumerator auxEnumerator = (componentDTO.ViewCollection as IEnumerable).GetEnumerator ();
                 while (auxEnumerator.MoveNext ()) {
                     if (fileName.StartsWith ((string)auxEnumerator.Current)) {
                         WriteFileAt (fileName, componentDirectory.GetDirectories ("Forms")[0], content);
@@ -271,7 +271,7 @@
                 enumerator.Reset ();
                 while (enumerator.MoveNext ()) {
                     string fileName = (string) enumerator.Current;
-                    if (fileName.StartsWith (componentSettingsDTO.ComponentName) && fileName.EndsWith (".build")) {
+                    if (fileName.StartsWith (componentDTO.ComponentName) && fileName.EndsWith (".build")) {
                         string content = (string) componentTable [fileName];
                         WriteFileAt (fileName, componentDirectory, content);
                     }
@@ -288,19 +288,19 @@
         }
         
         [ComponentMethod ("ComponentBuilder.Forms.MainComponentBuilderForm", "ResponseGenerateComponent")]
-        public void GenerateComponent (ComponentSettingsDTO componentSettingsDTO) {
+        public void GenerateComponent (ComponentDTO componentDTO) {
             Hashtable templateTable = GetTemplates ();
-            Hashtable componentTable = InitComponentTable (componentSettingsDTO, templateTable);
-            componentTable = FillTable (componentSettingsDTO, componentTable);
+            Hashtable componentTable = InitComponentTable (componentDTO, templateTable);
+            componentTable = FillTable (componentDTO, componentTable);
             //Haremos una segunda pasada para construir los m?todos.
-            componentTable = FillMethods (componentSettingsDTO, componentTable, templateTable);
+            componentTable = FillMethods (componentDTO, componentTable, templateTable);
             //Tercera pasada para conseguir las respuestas.
-            componentTable = FillResponses (componentSettingsDTO, componentTable, templateTable);
+            componentTable = FillResponses (componentDTO, componentTable, templateTable);
             
             //Ahora solo resta guardarlo en archivos.  Con la ruta por
             //defecto que se haya configurado.
-            DirectoryInfo componentDirectory = CreateSkeleton (componentSettingsDTO); 
-            WriteFiles (componentTable, componentDirectory, componentSettingsDTO); 
+            DirectoryInfo componentDirectory = CreateSkeleton (componentDTO); 
+            WriteFiles (componentTable, componentDirectory, componentDTO); 
             
             /**
             IDictionaryEnumerator enumerator = componentTable.GetEnumerator ();

Copied: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs (from rev 559, BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs)
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs	2005-10-27 11:40:48 UTC (rev 559)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -0,0 +1,39 @@
+using System;
+using System.Collections;
+using System.Collections.Specialized;
+using ComponentModel.Interfaces;
+
+namespace ComponentBuilder.DTO {
+    [Serializable]
+    public sealed class ComponentDTO : IDataTransferObject {
+        //Nombre del componente
+        private string componentName;
+        //Gestor de exceptions
+        private string classExceptionManager;
+        //Collection de vistas
+        private StringCollection viewCollection; 
+        //Collection de casos de uso
+        private IList methodCollection;
+
+        public IList MethodCollection {
+            get {return methodCollection;}
+            set {methodCollection = value;}
+        }
+
+        public StringCollection ViewCollection {
+            get {return viewCollection;}
+            set {viewCollection = value;}
+        }
+
+        public string ClassExceptionManager {
+            get {return classExceptionManager;}
+            set {classExceptionManager = value;}
+        }   
+        
+        public string ComponentName {
+            get {return componentName;}
+            set {componentName = value;}
+        }
+        
+    }
+}

Deleted: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentSettingsDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -1,40 +0,0 @@
-using System;
-using System.Collections;
-using System.Collections.Specialized;
-using ComponentModel.Interfaces;
-
-namespace ComponentBuilder.DTO {
-    [Serializable]
-    public sealed class ComponentSettingsDTO : IDataTransferObject {
-        //Nombre del componente
-        private string componentName;
-        //Gestor de exceptions
-        private string classExceptionManager;
-        //Collection de vistas
-        private StringCollection viewsCollection; 
-        //Collection de casos de uso
-        private IList methodsCollection;
-
-        public IList MethodsCollection {
-            get {return methodsCollection;}
-            set {methodsCollection = value;}
-        }
-
-        public StringCollection ViewsCollection {
-            get {return viewsCollection;}
-            set {viewsCollection = value;}
-        }
-
-        public string ClassExceptionManager {
-            get {return classExceptionManager;}
-            set {classExceptionManager = value;}
-        }   
-        
-        public string ComponentName {
-            get {return componentName;}
-            set {componentName = value;}
-        }
-
-        
-    }
-}

Deleted: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ConfigurationDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ConfigurationDTO.cs	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ConfigurationDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -1,20 +0,0 @@
-using System;
-using ComponentModel.Interfaces;
-
-namespace ComponentBuilder.DTO {
-    [Serializable]
-    public sealed class ConfigurationDTO : IDataTransferObject {
-        string baseOutPath;
-        bool generateNAnt;
-        
-        public bool GenerateNAnt {
-            get {return generateNAnt;}
-            set {generateNAnt = value;}
-        }
-        
-        public string BaseOutPath {
-            get {return baseOutPath;}
-            set {baseOutPath = value;}
-        }
-    }
-}

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -0,0 +1,34 @@
+using System;
+using System.Collections;
+using ComponentModel.Interfaces;
+
+namespace ComponentBuilder.DTO {
+    [Serializable]
+    public enum DeployMode {
+        Application,
+        ComponentLibrary,
+        SingleComponent
+    }
+    
+    [Serializable]
+    public sealed class ProjectDTO : IDataTransferObject {
+        string projectName;
+        IList componentCollection;
+        DeployMode deployMode;    
+
+        public DeployMode DeployMode {
+            get {return deployMode;}
+            set {deployMode = value;}
+        }
+        
+        public IList ComponentCollection {
+            get {return componentCollection;}
+            set {componentCollection = value;}
+        }
+        
+        public string ProjectName {
+            get {return projectName;}
+            set {projectName = value;}
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-05 20:19:04 UTC (rev 571)
@@ -40,12 +40,12 @@
 
         public IDataTransferObject GetDataForm () {
             if (ValidateForm ()) {
-                ComponentSettingsDTO componentSettingsDTO = new ComponentSettingsDTO ();                
-                componentSettingsDTO.ComponentName = componentNameEntry.Text;
-                componentSettingsDTO.ClassExceptionManager = exceptionManagerClassNameEntry.Text;
-                componentSettingsDTO.ViewsCollection = viewTableModel.ListModel;
-                componentSettingsDTO.MethodsCollection = methodTableModel.ListModel;
-                return componentSettingsDTO;
+                ComponentDTO componentDTO = new ComponentDTO ();                
+                componentDTO.ComponentName = componentNameEntry.Text;
+                componentDTO.ClassExceptionManager = exceptionManagerClassNameEntry.Text;
+                componentDTO.ViewCollection = viewTableModel.ListModel;
+                componentDTO.MethodCollection = methodTableModel.ListModel;
+                return componentDTO;
             }
             return null;
         }
@@ -61,8 +61,8 @@
         }
 
         public void LoadDataForm (IDataTransferObject dto) {
-            if (dto is ComponentSettingsDTO) {
-                ComponentSettingsDTO componentSettingsDTO = (ComponentSettingsDTO) dto;
+            if (dto is ComponentDTO) {
+                ComponentDTO componentDTO = (ComponentDTO) dto;
             }
         }
 
@@ -142,9 +142,9 @@
         }
 
         private void OnGenerateComponentClicked (object sender, EventArgs args) {
-            ComponentSettingsDTO componentSettingsDTO = (ComponentSettingsDTO) GetDataForm (); 
-            if (componentSettingsDTO != null) {
-                DefaultContainer.Instance.Execute ("ComponentBuilder", "GenerateComponent", new object[]{componentSettingsDTO}, this);
+            ComponentDTO componentDTO = (ComponentDTO) GetDataForm (); 
+            if (componentDTO != null) {
+                DefaultContainer.Instance.Execute ("ComponentBuilder", "GenerateComponent", new object[]{componentDTO}, this);
             }
         }
         /*Views & Methods buttons*/

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/Templates/AssemblyInfo.template
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/Templates/AssemblyInfo.template	2005-11-05 20:01:14 UTC (rev 570)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/Templates/AssemblyInfo.template	2005-11-05 20:19:04 UTC (rev 571)
@@ -0,0 +1,12 @@
+using System.Reflection;
+using System.Runtime.CompilerServices;
+
+[assembly: AssemblyTitle("${component_name}")]
+[assembly: AssemblyDescription("")]
+[assembly: AssemblyConfiguration("")]
+[assembly: AssemblyCompany("")]
+[assembly: AssemblyProduct("${component_name}")]
+[assembly: AssemblyCopyright("")]
+[assembly: AssemblyTrademark("")]
+[assembly: AssemblyCulture("")]
+[assembly: AssemblyVersion("0.1.*")]



From nestor at berlios.de  Mon Nov  7 18:29:37 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Mon, 7 Nov 2005 18:29:37 +0100
Subject: [Mspace-checkins] r572 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: . Bo Dao Dto Forms Forms/NodeStore Interfaces Resources
Message-ID: <200511071729.jA7HTbUY019121@sheep.berlios.de>

Author: nestor
Date: 2005-11-07 18:29:36 +0100 (Mon, 07 Nov 2005)
New Revision: 572

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dao/
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dao/ProjectDAO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ComponentNode.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/GenericNode.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ProjectNode.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IFileDao.cs
Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -4,10 +4,11 @@
 using System.Reflection;
 using System.IO;
 using System.Text;
-using System.Xml;
 using System.Xml.Serialization;
 using ComponentModel;
 using ComponentBuilder.DTO;
+using ComponentBuilder.DAO;
+using ComponentBuilder.Interfaces;
 
 namespace ComponentBuilder.Bo {
     [Component ("ComponentBuilder", "ComponentBuilder.Exceptions.ComponentBuilderExceptionManager")]
@@ -28,6 +29,23 @@
                 preferencesDTO = new PreferencesDTO ();
             }
         }
+
+        [ComponentMethod ("ComponentBuilder.Forms.MainComponentBuilderForm", "ResponseDeserializeProject")]
+        public ProjectDTO DeserializeProject (string fileName) {
+            IFileDAO projectDAO = new ProjectDAO ();
+            FileStream fileStream = new FileStream (fileName, FileMode.Open);
+            ProjectDTO projectDTO = (ProjectDTO) projectDAO.Deserialize (fileStream);
+            fileStream.Close ();
+            return projectDTO;
+        }
+            
+        [ComponentMethod ("ComponentBuilder.Forms.MainComponentBuilderForm", "ResponseSerializeProject")]
+        public void SerializeProject (ProjectDTO projectDTO, string fileName) {
+            IFileDAO projectDAO = new ProjectDAO ();
+            FileStream fileStream = new FileStream (fileName, FileMode.Create);
+            projectDAO.Serialize (fileStream, projectDTO);
+            fileStream.Close ();
+        }
         
         [ComponentMethod ("ComponentBuilder.Forms.MainComponentBuilderForm", "ResponseSerializePreferences")]
         public void SerializePreferences () {

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dao/ProjectDAO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dao/ProjectDAO.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dao/ProjectDAO.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -0,0 +1,22 @@
+using System;
+using System.IO;
+using System.Xml.Serialization;
+using ComponentModel.Interfaces;
+using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
+
+namespace ComponentBuilder.DAO {
+    public sealed class ProjectDAO : IFileDAO {
+        public void Serialize (Stream stream, IDataTransferObject dataTransferObject) {
+            XmlSerializer xmlSerializer = new XmlSerializer (dataTransferObject.GetType ()); 
+            StreamWriter streamWriter = new StreamWriter (stream);
+            xmlSerializer.Serialize (streamWriter, dataTransferObject);
+            streamWriter.Close ();
+        }
+
+        public IDataTransferObject Deserialize (Stream stream) {
+            XmlSerializer xmlSerializer = new XmlSerializer (typeof (ProjectDTO));
+            return (ProjectDTO)xmlSerializer.Deserialize (stream);
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -15,6 +15,11 @@
         //Collection de casos de uso
         private IList methodCollection;
 
+        public ComponentDTO () {
+            viewCollection = new StringCollection ();
+            methodCollection = new ArrayList ();
+        }
+        
         public IList MethodCollection {
             get {return methodCollection;}
             set {methodCollection = value;}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ProjectDTO.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -1,4 +1,5 @@
 using System;
+using System.Xml.Serialization;
 using System.Collections;
 using ComponentModel.Interfaces;
 
@@ -16,6 +17,10 @@
         IList componentCollection;
         DeployMode deployMode;    
 
+        public ProjectDTO () {
+            componentCollection = new ArrayList ();
+        }
+        
         public DeployMode DeployMode {
             get {return deployMode;}
             set {deployMode = value;}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -1,9 +1,11 @@
 using System;
+using System.Collections;
 using ComponentModel.Interfaces;
 using ComponentModel.DTO;
 using ComponentModel.Container;
 using ComponentBuilder.DTO;
 using ComponentBuilder.Forms.TableModel;
+using ComponentBuilder.Forms.NodeModel;
 using Gtk;
 using Glade;
 
@@ -13,11 +15,15 @@
         [Widget] Statusbar statusbar1;
         [Widget] TreeView viewsTreeView, methodsTreeView;
         [Widget] Entry componentNameEntry, exceptionManagerClassNameEntry;
+        [Widget] ScrolledWindow componentScrolledWindow;
         
+        NodeView componentNodeView;
+        NodeStore componentNodeStore;
+        
         ViewTableModel viewTableModel;
         MethodTableModel methodTableModel;
         ParameterTableModel parameterTableModel;
-        
+       
         /* Ctor */
         public MainComponentBuilderForm () {
             //La gracia ser?a sacar el VBox y pasarlo como si fuera un
@@ -33,12 +39,20 @@
             methodsTreeView.AppendColumn ("View To Reponse", new CellRendererText (), "text", 2);
             methodsTreeView.AppendColumn ("Response Method", new CellRendererText (), "text", 3);
             methodsTreeView.AppendColumn ("Parameters", new CellRendererText (), "text", 4);
+
+            //
+            componentNodeStore = new NodeStore (typeof (GenericNode));
+            componentNodeView = new NodeView (componentNodeStore);
+            componentNodeView.AppendColumn ("Project Tree", new CellRendererText (), "text", 0);
+            componentScrolledWindow.Add (componentNodeView);
+            componentScrolledWindow.ShowAll ();
         }
         
         /*Helpers implementation*/
 
 
         public IDataTransferObject GetDataForm () {
+            /**
             if (ValidateForm ()) {
                 ComponentDTO componentDTO = new ComponentDTO ();                
                 componentDTO.ComponentName = componentNameEntry.Text;
@@ -48,6 +62,14 @@
                 return componentDTO;
             }
             return null;
+        
+            */
+            IEnumerator enumerator = componentNodeStore.GetEnumerator ();
+            if (enumerator.MoveNext ()) {
+                Console.WriteLine (enumerator.Current.GetType ());
+                return ((ProjectNode) enumerator.Current).DataTransferObject;
+            }
+            return null;
         }
         
         private bool ValidateForm () {
@@ -64,6 +86,9 @@
             if (dto is ComponentDTO) {
                 ComponentDTO componentDTO = (ComponentDTO) dto;
             }
+            if (dto is ProjectDTO) {
+                ProjectDTO projectDTO = (ProjectDTO) dto;
+            }
         }
 
         public void ClearForm () {
@@ -106,6 +131,12 @@
                 Console.WriteLine ("Configuracion guardada.");
             }
         }
+        
+        public void ResponseSerializeProject (ResponseMethodDTO response) {
+            if (response.ExecutionSuccess) {
+                Console.WriteLine ("Project serialized successfully :)");
+            }
+        }
 
         /*Gui Events*/
         
@@ -124,6 +155,17 @@
         }
 
         private void OnMenuSaveAsActivate (object sender, EventArgs args) {
+            FileChooserDialog chooser = new FileChooserDialog ("Selecciona un fichero para guardar", (Window)gxml["window1"], FileChooserAction.Save, Stock.Save);
+            chooser.AddButton (Stock.Save, ResponseType.Accept);
+            chooser.AddButton (Stock.Cancel, ResponseType.Cancel);
+            chooser.SelectMultiple = false;
+            ResponseType response = (ResponseType)chooser.Run ();
+            if (response.Equals (ResponseType.Accept)) {
+                if (chooser.Filename.Length != 0) {
+                    DefaultContainer.Instance.Execute ("ComponentBuilder","SerializeProject", new object[]{(ProjectDTO)this.GetDataForm (), chooser.Filename}, this);
+                }
+            }
+            chooser.Destroy ();
         }
 
         private void OnMenuExitActivate (object sender, EventArgs args) {
@@ -139,6 +181,15 @@
 
         private void OnNewComponentClicked (object sender, EventArgs args) {
             ClearForm ();
+            ProjectDTO projectDTO = new ProjectDTO ();
+            projectDTO.ProjectName = "Empty Project";
+            
+            ComponentDTO componentDTO1 = new ComponentDTO ();
+            componentDTO1.ComponentName = "Lapava";
+            projectDTO.ComponentCollection.Add (componentDTO1);
+
+            componentNodeStore.Clear ();
+            componentNodeStore.AddNode (new ProjectNode (projectDTO));
         }
 
         private void OnGenerateComponentClicked (object sender, EventArgs args) {

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ComponentNode.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ComponentNode.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ComponentNode.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -0,0 +1,30 @@
+using System;
+using System.Collections;
+using System.Text;
+using ComponentModel.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+
+namespace ComponentBuilder.Forms.NodeModel {
+    /*
+     *
+     * Vamos a usar NodeStores para ver que tal van.
+     *
+     */
+    //[TreeNode (ColumnCount = 1)]
+    public sealed class ComponentNode : GenericNode {
+
+        public ComponentNode () : base () {}
+
+        public ComponentNode (ComponentDTO componentDTO) : base((IDataTransferObject) componentDTO) {
+        }
+
+        //[TreeNodeValue (Column = 0)]
+        public override string Value {
+            get {return ((ComponentDTO)DataTransferObject).ComponentName;}
+            set {((ComponentDTO)DataTransferObject).ComponentName = value;}
+        }
+        
+        
+    }
+}

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/GenericNode.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/GenericNode.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/GenericNode.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -0,0 +1,33 @@
+using System;
+using System.Collections;
+using System.Text;
+using ComponentModel.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+
+namespace ComponentBuilder.Forms.NodeModel {
+    /*
+     *
+     * Vamos a usar NodeStores para ver que tal van.
+     *
+     */
+    [TreeNode (ColumnCount = 1)]
+    public abstract class GenericNode : TreeNode {
+        IDataTransferObject dto;
+            
+        public GenericNode () {}
+
+        public GenericNode (IDataTransferObject dto) {
+            this.dto = dto;
+        }
+        
+        public IDataTransferObject DataTransferObject {
+            get {return dto;}
+            set {dto = value;}
+        }
+
+        [TreeNodeValue (Column = 0)]
+        public abstract string Value {get; set;}
+        
+    }
+}

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ProjectNode.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ProjectNode.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/NodeStore/ProjectNode.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -0,0 +1,34 @@
+using System;
+using System.Collections;
+using System.Text;
+using ComponentModel.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+
+namespace ComponentBuilder.Forms.NodeModel {
+    /*
+     *
+     * Vamos a usar NodeStores para ver que tal van.
+     *
+     */
+    //[TreeNode (ColumnCount = 1)]
+    public sealed class ProjectNode : GenericNode {
+
+        public ProjectNode () : base () {}
+
+        public ProjectNode (ProjectDTO projectDTO) : base ((IDataTransferObject) projectDTO){
+            foreach (ComponentDTO componentDTO in projectDTO.ComponentCollection) {
+                this.AddChild (new ComponentNode (componentDTO));
+            }
+        }
+        
+
+        //[TreeNodeValue (Column = 0)]
+        public override string Value {
+            get {return ((ProjectDTO)DataTransferObject).ProjectName;}
+            set {((ProjectDTO)DataTransferObject).ProjectName = value;}
+        }
+        
+        
+    }
+}

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IFileDao.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IFileDao.cs	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IFileDao.cs	2005-11-07 17:29:36 UTC (rev 572)
@@ -0,0 +1,15 @@
+//IFileDao.cs 
+//
+//For operations in a persistent file only.
+//
+
+using System;
+using System.IO;
+using ComponentModel.Interfaces;
+
+namespace ComponentBuilder.Interfaces {
+    public interface IFileDAO {
+        void Serialize (Stream stream, IDataTransferObject dataTransferObject);
+        IDataTransferObject Deserialize (Stream stream);
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-07 17:29:36 UTC (rev 572)
@@ -9,8 +9,8 @@
   <property name="type">GTK_WINDOW_TOPLEVEL</property>
   <property name="window_position">GTK_WIN_POS_CENTER</property>
   <property name="modal">False</property>
-  <property name="default_width">800</property>
-  <property name="default_height">600</property>
+  <property name="default_width">900</property>
+  <property name="default_height">650</property>
   <property name="resizable">True</property>
   <property name="destroy_with_parent">False</property>
   <property name="decorated">True</property>
@@ -243,333 +243,364 @@
       </child>
 
       <child>
-	<widget class="GtkTable" id="table1">
-	  <property name="border_width">20</property>
+	<widget class="GtkHPaned" id="hpaned1">
 	  <property name="visible">True</property>
-	  <property name="n_rows">6</property>
-	  <property name="n_columns">2</property>
-	  <property name="homogeneous">False</property>
-	  <property name="row_spacing">0</property>
-	  <property name="column_spacing">0</property>
+	  <property name="can_focus">True</property>
+	  <property name="position">200</property>
 
 	  <child>
-	    <widget class="GtkEntry" id="componentNameEntry">
+	    <widget class="GtkScrolledWindow" id="componentScrolledWindow">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
-	      <property name="editable">True</property>
-	      <property name="visibility">True</property>
-	      <property name="max_length">0</property>
-	      <property name="text" translatable="yes"></property>
-	      <property name="has_frame">True</property>
-	      <property name="invisible_char">*</property>
-	      <property name="activates_default">False</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">0</property>
-	      <property name="bottom_attach">1</property>
-	      <property name="y_options"></property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkEntry" id="exceptionManagerClassNameEntry">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="editable">True</property>
-	      <property name="visibility">True</property>
-	      <property name="max_length">0</property>
-	      <property name="text" translatable="yes"></property>
-	      <property name="has_frame">True</property>
-	      <property name="invisible_char">*</property>
-	      <property name="activates_default">False</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">1</property>
-	      <property name="bottom_attach">2</property>
-	      <property name="y_options"></property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkScrolledWindow" id="scrolledwindow1">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
 	      <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
 	      <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
 	      <property name="shadow_type">GTK_SHADOW_ETCHED_OUT</property>
 	      <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	      <child>
-		<widget class="GtkTreeView" id="viewsTreeView">
-		  <property name="visible">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="headers_visible">True</property>
-		  <property name="rules_hint">True</property>
-		  <property name="reorderable">False</property>
-		  <property name="enable_search">True</property>
-		  <property name="fixed_height_mode">False</property>
-		  <property name="hover_selection">False</property>
-		  <property name="hover_expand">False</property>
-		</widget>
+		<placeholder/>
 	      </child>
 	    </widget>
 	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">2</property>
-	      <property name="bottom_attach">3</property>
-	      <property name="x_options">fill</property>
+	      <property name="shrink">True</property>
+	      <property name="resize">False</property>
 	    </packing>
 	  </child>
 
 	  <child>
-	    <widget class="GtkHButtonBox" id="hbuttonbox2">
+	    <widget class="GtkTable" id="table1">
+	      <property name="border_width">20</property>
 	      <property name="visible">True</property>
-	      <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
-	      <property name="spacing">0</property>
+	      <property name="n_rows">6</property>
+	      <property name="n_columns">2</property>
+	      <property name="homogeneous">False</property>
+	      <property name="row_spacing">0</property>
+	      <property name="column_spacing">0</property>
 
 	      <child>
-		<widget class="GtkButton" id="button4">
+		<widget class="GtkEntry" id="componentNameEntry">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-new</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
-		  <signal name="clicked" handler="OnNewMethodClicked" last_modification_time="Sat, 22 Oct 2005 15:49:03 GMT"/>
+		  <property name="editable">True</property>
+		  <property name="visibility">True</property>
+		  <property name="max_length">0</property>
+		  <property name="text" translatable="yes"></property>
+		  <property name="has_frame">True</property>
+		  <property name="invisible_char">*</property>
+		  <property name="activates_default">False</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">0</property>
+		  <property name="bottom_attach">1</property>
+		  <property name="y_options"></property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button5">
+		<widget class="GtkEntry" id="exceptionManagerClassNameEntry">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-delete</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="editable">True</property>
+		  <property name="visibility">True</property>
+		  <property name="max_length">0</property>
+		  <property name="text" translatable="yes"></property>
+		  <property name="has_frame">True</property>
+		  <property name="invisible_char">*</property>
+		  <property name="activates_default">False</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">1</property>
+		  <property name="bottom_attach">2</property>
+		  <property name="y_options"></property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button6">
+		<widget class="GtkScrolledWindow" id="scrolledwindow1">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-clear</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="shadow_type">GTK_SHADOW_ETCHED_OUT</property>
+		  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+
+		  <child>
+		    <widget class="GtkTreeView" id="viewsTreeView">
+		      <property name="visible">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="headers_visible">True</property>
+		      <property name="rules_hint">True</property>
+		      <property name="reorderable">False</property>
+		      <property name="enable_search">True</property>
+		      <property name="fixed_height_mode">False</property>
+		      <property name="hover_selection">False</property>
+		      <property name="hover_expand">False</property>
+		    </widget>
+		  </child>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">2</property>
+		  <property name="bottom_attach">3</property>
+		  <property name="x_options">fill</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">5</property>
-	      <property name="bottom_attach">6</property>
-	      <property name="x_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkScrolledWindow" id="scrolledwindow3">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-	      <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-	      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-	      <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+	      <child>
+		<widget class="GtkHButtonBox" id="hbuttonbox2">
+		  <property name="visible">True</property>
+		  <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
+		  <property name="spacing">0</property>
 
+		  <child>
+		    <widget class="GtkButton" id="button4">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		      <signal name="clicked" handler="OnNewMethodClicked" last_modification_time="Sat, 22 Oct 2005 15:49:03 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button5">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button6">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-clear</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">5</property>
+		  <property name="bottom_attach">6</property>
+		  <property name="x_options">fill</property>
+		</packing>
+	      </child>
+
 	      <child>
-		<widget class="GtkTreeView" id="methodsTreeView">
+		<widget class="GtkScrolledWindow" id="scrolledwindow3">
 		  <property name="visible">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="headers_visible">True</property>
-		  <property name="rules_hint">True</property>
-		  <property name="reorderable">False</property>
-		  <property name="enable_search">True</property>
-		  <property name="fixed_height_mode">False</property>
-		  <property name="hover_selection">False</property>
-		  <property name="hover_expand">False</property>
+		  <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+		  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+
+		  <child>
+		    <widget class="GtkTreeView" id="methodsTreeView">
+		      <property name="visible">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="headers_visible">True</property>
+		      <property name="rules_hint">True</property>
+		      <property name="reorderable">False</property>
+		      <property name="enable_search">True</property>
+		      <property name="fixed_height_mode">False</property>
+		      <property name="hover_selection">False</property>
+		      <property name="hover_expand">False</property>
+		    </widget>
+		  </child>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">4</property>
+		  <property name="bottom_attach">5</property>
+		  <property name="x_options">fill</property>
+		  <property name="y_options">fill</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">4</property>
-	      <property name="bottom_attach">5</property>
-	      <property name="x_options">fill</property>
-	      <property name="y_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkHButtonBox" id="hbuttonbox1">
-	      <property name="visible">True</property>
-	      <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
-	      <property name="spacing">0</property>
+	      <child>
+		<widget class="GtkHButtonBox" id="hbuttonbox1">
+		  <property name="visible">True</property>
+		  <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
+		  <property name="spacing">0</property>
 
+		  <child>
+		    <widget class="GtkButton" id="button1">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		      <signal name="clicked" handler="OnNewViewClicked" last_modification_time="Sat, 22 Oct 2005 15:21:29 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button2">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button3">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-clear</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">3</property>
+		  <property name="bottom_attach">4</property>
+		  <property name="x_options">fill</property>
+		</packing>
+	      </child>
+
 	      <child>
-		<widget class="GtkButton" id="button1">
+		<widget class="GtkLabel" id="label2">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-new</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
-		  <signal name="clicked" handler="OnNewViewClicked" last_modification_time="Sat, 22 Oct 2005 15:21:29 GMT"/>
+		  <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">1</property>
+		  <property name="bottom_attach">2</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button2">
+		<widget class="GtkLabel" id="label3">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-delete</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;View Classes: &lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">2</property>
+		  <property name="bottom_attach">3</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button3">
+		<widget class="GtkLabel" id="label4">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-clear</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;Methods: &lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">4</property>
+		  <property name="bottom_attach">5</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">3</property>
-	      <property name="bottom_attach">4</property>
-	      <property name="x_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkLabel" id="label2">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
+	      <child>
+		<widget class="GtkLabel" id="label1">
+		  <property name="visible">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;Component Name:&lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
+		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">0</property>
+		  <property name="bottom_attach">1</property>
+		  <property name="y_options">expand</property>
+		</packing>
+	      </child>
 	    </widget>
 	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">1</property>
-	      <property name="bottom_attach">2</property>
-	      <property name="y_options">expand</property>
+	      <property name="shrink">True</property>
+	      <property name="resize">True</property>
 	    </packing>
 	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label3">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;View Classes: &lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">2</property>
-	      <property name="bottom_attach">3</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label4">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Methods: &lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">4</property>
-	      <property name="bottom_attach">5</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label1">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Component Name:&lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">0</property>
-	      <property name="bottom_attach">1</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
 	</widget>
 	<packing>
 	  <property name="padding">0</property>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-05 20:19:04 UTC (rev 571)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-07 17:29:36 UTC (rev 572)
@@ -9,8 +9,8 @@
   <property name="type">GTK_WINDOW_TOPLEVEL</property>
   <property name="window_position">GTK_WIN_POS_CENTER</property>
   <property name="modal">False</property>
-  <property name="default_width">800</property>
-  <property name="default_height">600</property>
+  <property name="default_width">900</property>
+  <property name="default_height">650</property>
   <property name="resizable">True</property>
   <property name="destroy_with_parent">False</property>
   <property name="decorated">True</property>
@@ -243,333 +243,364 @@
       </child>
 
       <child>
-	<widget class="GtkTable" id="table1">
-	  <property name="border_width">20</property>
+	<widget class="GtkHPaned" id="hpaned1">
 	  <property name="visible">True</property>
-	  <property name="n_rows">6</property>
-	  <property name="n_columns">2</property>
-	  <property name="homogeneous">False</property>
-	  <property name="row_spacing">0</property>
-	  <property name="column_spacing">0</property>
+	  <property name="can_focus">True</property>
+	  <property name="position">200</property>
 
 	  <child>
-	    <widget class="GtkEntry" id="componentNameEntry">
+	    <widget class="GtkScrolledWindow" id="scrolledwindow5">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
-	      <property name="editable">True</property>
-	      <property name="visibility">True</property>
-	      <property name="max_length">0</property>
-	      <property name="text" translatable="yes"></property>
-	      <property name="has_frame">True</property>
-	      <property name="invisible_char">*</property>
-	      <property name="activates_default">False</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">0</property>
-	      <property name="bottom_attach">1</property>
-	      <property name="y_options"></property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkEntry" id="exceptionManagerClassNameEntry">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="editable">True</property>
-	      <property name="visibility">True</property>
-	      <property name="max_length">0</property>
-	      <property name="text" translatable="yes"></property>
-	      <property name="has_frame">True</property>
-	      <property name="invisible_char">*</property>
-	      <property name="activates_default">False</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">1</property>
-	      <property name="bottom_attach">2</property>
-	      <property name="y_options"></property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkScrolledWindow" id="scrolledwindow1">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
 	      <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
 	      <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
 	      <property name="shadow_type">GTK_SHADOW_ETCHED_OUT</property>
 	      <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	      <child>
-		<widget class="GtkTreeView" id="viewsTreeView">
-		  <property name="visible">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="headers_visible">True</property>
-		  <property name="rules_hint">True</property>
-		  <property name="reorderable">False</property>
-		  <property name="enable_search">True</property>
-		  <property name="fixed_height_mode">False</property>
-		  <property name="hover_selection">False</property>
-		  <property name="hover_expand">False</property>
-		</widget>
+		<placeholder/>
 	      </child>
 	    </widget>
 	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">2</property>
-	      <property name="bottom_attach">3</property>
-	      <property name="x_options">fill</property>
+	      <property name="shrink">True</property>
+	      <property name="resize">False</property>
 	    </packing>
 	  </child>
 
 	  <child>
-	    <widget class="GtkHButtonBox" id="hbuttonbox2">
+	    <widget class="GtkTable" id="table1">
+	      <property name="border_width">20</property>
 	      <property name="visible">True</property>
-	      <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
-	      <property name="spacing">0</property>
+	      <property name="n_rows">6</property>
+	      <property name="n_columns">2</property>
+	      <property name="homogeneous">False</property>
+	      <property name="row_spacing">0</property>
+	      <property name="column_spacing">0</property>
 
 	      <child>
-		<widget class="GtkButton" id="button4">
+		<widget class="GtkEntry" id="componentNameEntry">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-new</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
-		  <signal name="clicked" handler="OnNewMethodClicked" last_modification_time="Sat, 22 Oct 2005 15:49:03 GMT"/>
+		  <property name="editable">True</property>
+		  <property name="visibility">True</property>
+		  <property name="max_length">0</property>
+		  <property name="text" translatable="yes"></property>
+		  <property name="has_frame">True</property>
+		  <property name="invisible_char">*</property>
+		  <property name="activates_default">False</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">0</property>
+		  <property name="bottom_attach">1</property>
+		  <property name="y_options"></property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button5">
+		<widget class="GtkEntry" id="exceptionManagerClassNameEntry">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-delete</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="editable">True</property>
+		  <property name="visibility">True</property>
+		  <property name="max_length">0</property>
+		  <property name="text" translatable="yes"></property>
+		  <property name="has_frame">True</property>
+		  <property name="invisible_char">*</property>
+		  <property name="activates_default">False</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">1</property>
+		  <property name="bottom_attach">2</property>
+		  <property name="y_options"></property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button6">
+		<widget class="GtkScrolledWindow" id="scrolledwindow1">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="label">gtk-clear</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="shadow_type">GTK_SHADOW_ETCHED_OUT</property>
+		  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+
+		  <child>
+		    <widget class="GtkTreeView" id="viewsTreeView">
+		      <property name="visible">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="headers_visible">True</property>
+		      <property name="rules_hint">True</property>
+		      <property name="reorderable">False</property>
+		      <property name="enable_search">True</property>
+		      <property name="fixed_height_mode">False</property>
+		      <property name="hover_selection">False</property>
+		      <property name="hover_expand">False</property>
+		    </widget>
+		  </child>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">2</property>
+		  <property name="bottom_attach">3</property>
+		  <property name="x_options">fill</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">5</property>
-	      <property name="bottom_attach">6</property>
-	      <property name="x_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkScrolledWindow" id="scrolledwindow3">
-	      <property name="visible">True</property>
-	      <property name="can_focus">True</property>
-	      <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-	      <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-	      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-	      <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+	      <child>
+		<widget class="GtkHButtonBox" id="hbuttonbox2">
+		  <property name="visible">True</property>
+		  <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
+		  <property name="spacing">0</property>
 
+		  <child>
+		    <widget class="GtkButton" id="button4">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		      <signal name="clicked" handler="OnNewMethodClicked" last_modification_time="Sat, 22 Oct 2005 15:49:03 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button5">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button6">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-clear</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">5</property>
+		  <property name="bottom_attach">6</property>
+		  <property name="x_options">fill</property>
+		</packing>
+	      </child>
+
 	      <child>
-		<widget class="GtkTreeView" id="methodsTreeView">
+		<widget class="GtkScrolledWindow" id="scrolledwindow3">
 		  <property name="visible">True</property>
 		  <property name="can_focus">True</property>
-		  <property name="headers_visible">True</property>
-		  <property name="rules_hint">True</property>
-		  <property name="reorderable">False</property>
-		  <property name="enable_search">True</property>
-		  <property name="fixed_height_mode">False</property>
-		  <property name="hover_selection">False</property>
-		  <property name="hover_expand">False</property>
+		  <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
+		  <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+		  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
+
+		  <child>
+		    <widget class="GtkTreeView" id="methodsTreeView">
+		      <property name="visible">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="headers_visible">True</property>
+		      <property name="rules_hint">True</property>
+		      <property name="reorderable">False</property>
+		      <property name="enable_search">True</property>
+		      <property name="fixed_height_mode">False</property>
+		      <property name="hover_selection">False</property>
+		      <property name="hover_expand">False</property>
+		    </widget>
+		  </child>
 		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">4</property>
+		  <property name="bottom_attach">5</property>
+		  <property name="x_options">fill</property>
+		  <property name="y_options">fill</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">4</property>
-	      <property name="bottom_attach">5</property>
-	      <property name="x_options">fill</property>
-	      <property name="y_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkHButtonBox" id="hbuttonbox1">
-	      <property name="visible">True</property>
-	      <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
-	      <property name="spacing">0</property>
+	      <child>
+		<widget class="GtkHButtonBox" id="hbuttonbox1">
+		  <property name="visible">True</property>
+		  <property name="layout_style">GTK_BUTTONBOX_DEFAULT_STYLE</property>
+		  <property name="spacing">0</property>
 
+		  <child>
+		    <widget class="GtkButton" id="button1">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-new</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		      <signal name="clicked" handler="OnNewViewClicked" last_modification_time="Sat, 22 Oct 2005 15:21:29 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button2">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-delete</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+
+		  <child>
+		    <widget class="GtkButton" id="button3">
+		      <property name="visible">True</property>
+		      <property name="can_default">True</property>
+		      <property name="can_focus">True</property>
+		      <property name="label">gtk-clear</property>
+		      <property name="use_stock">True</property>
+		      <property name="relief">GTK_RELIEF_NORMAL</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		  </child>
+		</widget>
+		<packing>
+		  <property name="left_attach">1</property>
+		  <property name="right_attach">2</property>
+		  <property name="top_attach">3</property>
+		  <property name="bottom_attach">4</property>
+		  <property name="x_options">fill</property>
+		</packing>
+	      </child>
+
 	      <child>
-		<widget class="GtkButton" id="button1">
+		<widget class="GtkLabel" id="label2">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-new</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
-		  <signal name="clicked" handler="OnNewViewClicked" last_modification_time="Sat, 22 Oct 2005 15:21:29 GMT"/>
+		  <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">1</property>
+		  <property name="bottom_attach">2</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button2">
+		<widget class="GtkLabel" id="label3">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-delete</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;View Classes: &lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">2</property>
+		  <property name="bottom_attach">3</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
 
 	      <child>
-		<widget class="GtkButton" id="button3">
+		<widget class="GtkLabel" id="label4">
 		  <property name="visible">True</property>
-		  <property name="can_default">True</property>
-		  <property name="can_focus">True</property>
-		  <property name="label">gtk-clear</property>
-		  <property name="use_stock">True</property>
-		  <property name="relief">GTK_RELIEF_NORMAL</property>
-		  <property name="focus_on_click">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;Methods: &lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
 		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">4</property>
+		  <property name="bottom_attach">5</property>
+		  <property name="y_options">expand</property>
+		</packing>
 	      </child>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">1</property>
-	      <property name="right_attach">2</property>
-	      <property name="top_attach">3</property>
-	      <property name="bottom_attach">4</property>
-	      <property name="x_options">fill</property>
-	    </packing>
-	  </child>
 
-	  <child>
-	    <widget class="GtkLabel" id="label2">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
+	      <child>
+		<widget class="GtkLabel" id="label1">
+		  <property name="visible">True</property>
+		  <property name="label" translatable="yes">&lt;b&gt;Component Name:&lt;/b&gt;</property>
+		  <property name="use_underline">False</property>
+		  <property name="use_markup">True</property>
+		  <property name="justify">GTK_JUSTIFY_CENTER</property>
+		  <property name="wrap">True</property>
+		  <property name="selectable">False</property>
+		  <property name="xalign">0</property>
+		  <property name="yalign">0.5</property>
+		  <property name="xpad">0</property>
+		  <property name="ypad">0</property>
+		  <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
+		  <property name="width_chars">-1</property>
+		  <property name="single_line_mode">False</property>
+		  <property name="angle">0</property>
+		</widget>
+		<packing>
+		  <property name="left_attach">0</property>
+		  <property name="right_attach">1</property>
+		  <property name="top_attach">0</property>
+		  <property name="bottom_attach">1</property>
+		  <property name="y_options">expand</property>
+		</packing>
+	      </child>
 	    </widget>
 	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">1</property>
-	      <property name="bottom_attach">2</property>
-	      <property name="y_options">expand</property>
+	      <property name="shrink">True</property>
+	      <property name="resize">True</property>
 	    </packing>
 	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label3">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;View Classes: &lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">2</property>
-	      <property name="bottom_attach">3</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label4">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Methods: &lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">4</property>
-	      <property name="bottom_attach">5</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
-
-	  <child>
-	    <widget class="GtkLabel" id="label1">
-	      <property name="visible">True</property>
-	      <property name="label" translatable="yes">&lt;b&gt;Component Name:&lt;/b&gt;</property>
-	      <property name="use_underline">False</property>
-	      <property name="use_markup">True</property>
-	      <property name="justify">GTK_JUSTIFY_CENTER</property>
-	      <property name="wrap">True</property>
-	      <property name="selectable">False</property>
-	      <property name="xalign">0</property>
-	      <property name="yalign">0.5</property>
-	      <property name="xpad">0</property>
-	      <property name="ypad">0</property>
-	      <property name="ellipsize">PANGO_ELLIPSIZE_MIDDLE</property>
-	      <property name="width_chars">-1</property>
-	      <property name="single_line_mode">False</property>
-	      <property name="angle">0</property>
-	    </widget>
-	    <packing>
-	      <property name="left_attach">0</property>
-	      <property name="right_attach">1</property>
-	      <property name="top_attach">0</property>
-	      <property name="bottom_attach">1</property>
-	      <property name="y_options">expand</property>
-	    </packing>
-	  </child>
 	</widget>
 	<packing>
 	  <property name="padding">0</property>



From nestor at berlios.de  Wed Nov  9 00:55:35 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Wed, 9 Nov 2005 00:55:35 +0100
Subject: [Mspace-checkins] r574 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Forms Resources
Message-ID: <200511082355.jA8NtZo2017910@sheep.berlios.de>

Author: nestor
Date: 2005-11-09 00:55:30 +0100 (Wed, 09 Nov 2005)
New Revision: 574

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-08 23:27:36 UTC (rev 573)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-08 23:55:30 UTC (rev 574)
@@ -1,23 +1,69 @@
 using System;
 using ComponentModel.Interfaces;
 using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
+using ComponentBuilder.Forms.TableModel;
 using Gtk;
 using Glade;
 
 namespace ComponentBuilder.Forms {
     internal class ComponentView : IViewHandler, IGtkView {
         Glade.XML componentView;
+        [Widget] TreeView viewsTreeView, methodsTreeView;
+        [Widget] Entry componentNameEntry, exceptionManagerEntry;
+            
+        ViewTableModel viewTableModel;
+        MethodTableModel methodTableModel;
         
         internal ComponentView () {
             componentView = new Glade.XML (null, "MainComponentBuilderForm.glade", "table5", null);
-            //componentView.Autoconnect (this);
+            componentView.Autoconnect (this);
+
+            //
+
+            viewsTreeView.AppendColumn ("View Type Name", new CellRendererText (), "text", 0);
+            
+            methodsTreeView.AppendColumn ("Method Name", new CellRendererText (), "text", 0);
+            methodsTreeView.AppendColumn ("Return Type", new CellRendererText (), "text", 1);
+            methodsTreeView.AppendColumn ("View To Reponse", new CellRendererText (), "text", 2);
+            methodsTreeView.AppendColumn ("Response Method", new CellRendererText (), "text", 3);
+            methodsTreeView.AppendColumn ("Parameters", new CellRendererText (), "text", 4);
+
+            //Vamos a instanciar tambi?n los modelos de las vistas.
+        
+            viewTableModel = new ViewTableModel ();
+            viewsTreeView.Model = viewTableModel.ListStore;
+            methodTableModel = new MethodTableModel ();
+            methodsTreeView.Model = methodTableModel.ListStore;
         }
+       
+        /* GUI Events */
+        private void OnNewMethodClicked (object sender, EventArgs args) {
+        }
+
+        private void OnNewViewClicked (object sender, EventArgs args) {
+        }
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is ComponentDTO) {
+                ComponentDTO componentDTO = (ComponentDTO) dto; 
+                componentNameEntry.Text = componentDTO.ComponentName;
+                exceptionManagerEntry.Text = componentDTO.ClassExceptionManager;
+                viewTableModel = new ViewTableModel (componentDTO.ViewCollection);
+                viewsTreeView.Model = viewTableModel.ListStore;
+                methodTableModel = new MethodTableModel (componentDTO.MethodCollection);
+                methodsTreeView.Model = viewTableModel.ListStore;
+            }
         }
 
         public void ClearForm () {
+            componentNameEntry.Text = String.Empty;
+            exceptionManagerEntry.Text = String.Empty;
+            viewTableModel = new ViewTableModel ();
+            viewsTreeView.Model = viewTableModel.ListStore;
+            methodTableModel = new MethodTableModel ();
+            methodsTreeView.Model = methodTableModel.ListStore;
         }
 
         public IDataTransferObject GetDataForm () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-08 23:27:36 UTC (rev 573)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-08 23:55:30 UTC (rev 574)
@@ -18,7 +18,6 @@
             componentNodeView.AppendColumn ("Project Tree", new CellRendererText (),"text", 0);
             componentScrolledWindow = new ScrolledWindow ();
             componentScrolledWindow.Add (componentNodeView);
-
         }
         
         /* Interface Implementation */
@@ -26,6 +25,7 @@
         }
 
         public void ClearForm () {
+            componentNodeStore.Clear ();
         }
 
         public IDataTransferObject GetDataForm () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-08 23:27:36 UTC (rev 573)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-08 23:55:30 UTC (rev 574)
@@ -1316,7 +1316,7 @@
       <property name="column_spacing">0</property>
 
       <child>
-	<widget class="GtkEntry" id="entry1">
+	<widget class="GtkEntry" id="componentNameEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>
@@ -1337,7 +1337,7 @@
       </child>
 
       <child>
-	<widget class="GtkEntry" id="entry2">
+	<widget class="GtkEntry" id="exceptionManangerEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>
@@ -1367,7 +1367,7 @@
 	  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	  <child>
-	    <widget class="GtkTreeView" id="treeview1">
+	    <widget class="GtkTreeView" id="viewsTreeView">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="headers_visible">True</property>
@@ -1451,7 +1451,7 @@
 	  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	  <child>
-	    <widget class="GtkTreeView" id="treeview2">
+	    <widget class="GtkTreeView" id="methodsTreeView">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="headers_visible">True</property>
@@ -1529,7 +1529,8 @@
       <child>
 	<widget class="GtkLabel" id="label17">
 	  <property name="visible">True</property>
-	  <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
+	  <property name="label" translatable="yes">&lt;b&gt;Exception Manager
+ Class Name:&lt;/b&gt;</property>
 	  <property name="use_underline">False</property>
 	  <property name="use_markup">True</property>
 	  <property name="justify">GTK_JUSTIFY_CENTER</property>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-08 23:27:36 UTC (rev 573)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-08 23:55:30 UTC (rev 574)
@@ -1316,7 +1316,7 @@
       <property name="column_spacing">0</property>
 
       <child>
-	<widget class="GtkEntry" id="entry1">
+	<widget class="GtkEntry" id="componentNameEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>
@@ -1337,7 +1337,7 @@
       </child>
 
       <child>
-	<widget class="GtkEntry" id="entry2">
+	<widget class="GtkEntry" id="exceptionManangerEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>
@@ -1367,7 +1367,7 @@
 	  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	  <child>
-	    <widget class="GtkTreeView" id="treeview1">
+	    <widget class="GtkTreeView" id="viewsTreeView">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="headers_visible">True</property>
@@ -1451,7 +1451,7 @@
 	  <property name="window_placement">GTK_CORNER_TOP_LEFT</property>
 
 	  <child>
-	    <widget class="GtkTreeView" id="treeview2">
+	    <widget class="GtkTreeView" id="methodsTreeView">
 	      <property name="visible">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="headers_visible">True</property>
@@ -1529,7 +1529,8 @@
       <child>
 	<widget class="GtkLabel" id="label17">
 	  <property name="visible">True</property>
-	  <property name="label" translatable="yes">&lt;b&gt;Exception Manager Class Name:&lt;/b&gt;</property>
+	  <property name="label" translatable="yes">&lt;b&gt;Exception Manager
+ Class Name:&lt;/b&gt;</property>
 	  <property name="use_underline">False</property>
 	  <property name="use_markup">True</property>
 	  <property name="justify">GTK_JUSTIFY_CENTER</property>



From nestor at berlios.de  Wed Nov  9 13:52:56 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Wed, 9 Nov 2005 13:52:56 +0100
Subject: [Mspace-checkins] r575 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Bo Dto Forms Forms/TableModel Resources
Message-ID: <200511091252.jA9CquIl017651@sheep.berlios.de>

Author: nestor
Date: 2005-11-09 13:52:44 +0100 (Wed, 09 Nov 2005)
New Revision: 575

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ViewDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs
Removed:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/old/
Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Bo/ComponentBuilderComponentModel.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -118,10 +118,10 @@
             componentTable.Add (manifestBuilder.ToString (), templateTable[TemplateNamesDTO.AssemblyInfo]);
             */
             //A?aidmos las vistas
-            StringEnumerator enumerator = componentDTO.ViewCollection.GetEnumerator ();
+            IEnumerator enumerator = componentDTO.ViewCollection.GetEnumerator ();
             while (enumerator.MoveNext ()) {
-                string currentView = enumerator.Current;
-                componentTable.Add (currentView + ".cs", templateTable[TemplateNamesDTO.ViewHandler]); 
+                ViewDTO currentView = (ViewDTO) enumerator.Current;
+                componentTable.Add (currentView.ViewName + ".cs", templateTable[TemplateNamesDTO.ViewHandler]); 
             }
             //A?adimos el file nant.
             if (preferencesDTO.GenerateBuildfile) {
@@ -157,7 +157,8 @@
                     stringBuilder = stringBuilder.Replace (TagValuesDTO.Prefix, preferencesDTO.PrefixNamespace);
                 }
                 //Ahora para las vistas se discernira para cada una.
-                foreach (String view in componentDTO.ViewCollection) { 
+                foreach (ViewDTO viewDTO in componentDTO.ViewCollection) { 
+                    string view = viewDTO.ViewName;
                     if (currentKey.StartsWith (view)) {
                         stringBuilder = stringBuilder.Replace (TagValuesDTO.ViewName, view);
                     }
@@ -229,7 +230,9 @@
         }
         
         private Hashtable FillResponses (ComponentDTO componentDTO, Hashtable componentTable, Hashtable templateTable) {
-            foreach (string viewName in componentDTO.ViewCollection) {
+            
+            foreach (ViewDTO viewDTO in componentDTO.ViewCollection) {
+                string viewName = viewDTO.ViewName;
                 StringBuilder responseBuilder = new StringBuilder ();
                 foreach (MethodDTO methodDTO in componentDTO.MethodCollection) {
                     if (methodDTO.ViewToResponse.Equals (viewName)) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -11,7 +11,7 @@
         //Gestor de exceptions
         private string classExceptionManager;
         //Collection de vistas
-        private StringCollection viewCollection; 
+        private IList viewCollection; 
         //Collection de casos de uso
         private IList methodCollection;
 
@@ -25,7 +25,7 @@
             set {methodCollection = value;}
         }
 
-        public StringCollection ViewCollection {
+        public IList ViewCollection {
             get {return viewCollection;}
             set {viewCollection = value;}
         }

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ViewDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ViewDTO.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ViewDTO.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -0,0 +1,14 @@
+using System;
+using ComponentModel.Interfaces;
+
+namespace ComponentBuilder.DTO {
+    [Serializable]
+    public sealed class ViewDTO : IDataTransferObject {
+        private string viewName;
+
+        public string ViewName {
+            get {return viewName;}
+            set {viewName = value;}
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -15,6 +15,9 @@
         ViewTableModel viewTableModel;
         MethodTableModel methodTableModel;
         
+        FormView formView;
+        MethodView methodView;
+        
         internal ComponentView () {
             componentView = new Glade.XML (null, "MainComponentBuilderForm.glade", "table5", null);
             componentView.Autoconnect (this);
@@ -39,9 +42,18 @@
        
         /* GUI Events */
         private void OnNewMethodClicked (object sender, EventArgs args) {
+            methodView = new MethodView ();
+            MethodDTO methodDTO = (MethodDTO) methodView.GetDataForm ();
+            methodView = null;
         }
 
         private void OnNewViewClicked (object sender, EventArgs args) {
+            formView = new FormView ();
+            ViewDTO viewDTO = (ViewDTO) formView.GetDataForm ();
+            if (viewDTO != null) {
+                viewTableModel.Add (viewDTO);
+            }
+            formView = null;
         }
         
         /* Interface Implementation */

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -0,0 +1,52 @@
+using System;
+using ComponentModel.Interfaces;
+using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+using Glade;
+
+namespace ComponentBuilder.Forms {
+    internal class FormView : IViewHandler, IGtkView {
+        Glade.XML newViewForm;
+        [Widget] Entry viewNameEntry;   
+        
+        internal FormView () {
+            newViewForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "newViewDialog", null);
+            newViewForm.Autoconnect (this);
+        }
+
+        /* Interface Implementation */
+
+        public void ClearForm () {
+        }
+
+        public IDataTransferObject GetDataForm () {
+            Dialog newViewDialog = (Dialog) GetWidget ();
+            ViewDTO viewDTO = null;
+            switch (newViewDialog.Run ()) {
+                case (int) ResponseType.Ok:
+                    if (viewNameEntry.Text.Length != 0) { 
+                        viewDTO = new ViewDTO ();
+                        viewDTO.ViewName = viewNameEntry.Text;
+                    }
+                    break;
+                case (int) ResponseType.Cancel:
+                    break;
+                default:
+                    break;
+            }
+            newViewDialog.Destroy ();
+            newViewDialog = null;
+            return viewDTO;
+        }
+
+        public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is ViewDTO) {
+            }
+        }
+
+        public Widget GetWidget () {
+            return newViewForm ["newViewDialog"];
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -1,6 +1,8 @@
 using System;
+using ComponentModel.Container;
 using ComponentModel.Interfaces;
 using ComponentModel.DTO;
+using ComponentBuilder.DTO;
 using Gtk;
 using Glade;
 
@@ -42,6 +44,18 @@
         }
 
         private void OnMenuSaveAsActivate (object sender, EventArgs args) {
+            //Serialization.
+            FileChooserDialog chooser = new FileChooserDialog ("Selecciona un fichero para guardar", (Window)mainComponentBuilderForm["mainView"], FileChooserAction.Save, Stock.Save);
+            chooser.AddButton (Stock.Save, ResponseType.Accept);
+            chooser.AddButton (Stock.Cancel, ResponseType.Cancel);
+            chooser.SelectMultiple = false;
+            ResponseType response = (ResponseType)chooser.Run ();
+            if (response.Equals (ResponseType.Accept)) {
+                if (chooser.Filename.Length != 0) {
+                    DefaultContainer.Instance.Execute ("ComponentBuilder","SerializeProject", new object[]{(ProjectDTO)this.GetDataForm (), chooser.Filename}, this);
+                }
+            }
+            chooser.Destroy ();
         }
 
         private void OnMenuExitActivate (object sender, EventArgs args) {
@@ -53,9 +67,22 @@
 
         /*Toolbar*/
 
-        private void OnNewComponentClicked (object sender, EventArgs args) {
+        private void OnNewProjectClicked (object sender, EventArgs args) {
             ClearForm ();
+            ProjectDTO projectDTO = new ProjectDTO ();
+            projectDTO.ProjectName = "New Project";
+            LoadDataForm (projectDTO);
         }
+        
+        private void OnAddComponentClicked (object sender, EventArgs args) {
+            ProjectDTO projectDTO = (ProjectDTO) projectView.GetDataForm ();
+            ComponentDTO componentDTO = new ComponentDTO ();
+            componentDTO.ComponentName = "New Component";
+            projectDTO.ComponentCollection.Add (componentDTO);
+            //Hago el refresco aqu?, expl?cito.
+            projectView.LoadDataForm (componentDTO);
+            LoadDataForm (componentDTO);
+        }
 
         private void OnGenerateComponentClicked (object sender, EventArgs args) {
         }
@@ -71,16 +98,33 @@
                 statusbar1.Push (0, String.Format ("Welcome to Babuine Component Builder: {0}@{1}", Environment.UserName, Environment.MachineName));
             }
         }
+
+        public void ResponseSerializeProject (ResponseMethodDTO response) {
+            if (response.ExecutionSuccess) {
+                Console.WriteLine ("Project
+        }
+    }
+} has been serialized successfully");
+            }
+        }
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is ProjectDTO) {
+                projectView.LoadDataForm (dto);
+            }
+            else if (dto is ComponentDTO) {
+                componentView.LoadDataForm (dto);
+            }
         }
 
         public void ClearForm () {
+            projectView.ClearForm ();
+            componentView.ClearForm ();
         }
 
         public IDataTransferObject GetDataForm () {
-            return null;
+            return projectView.GetDataForm ();
         }
     }
 }

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -0,0 +1,43 @@
+using System;
+using ComponentModel.Interfaces;
+using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+using Glade;
+
+namespace ComponentBuilder.Forms {
+    internal class MethodView : IViewHandler, IGtkView {
+        Glade.XML newMethodForm;
+        
+        internal MethodView () {
+            newMethodForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "newMethodDialog", null);
+            newMethodForm.Autoconnect (this);
+        }
+
+        private void OnNewParameterClicked (object sender, EventArgs args) {
+        }
+
+        /* Interface Implementation */
+
+        public void ClearForm () {
+        }
+
+        public IDataTransferObject GetDataForm () {
+            Dialog newMethodDialog = (Dialog) GetWidget ();
+            Console.WriteLine (newMethodDialog.Run ());
+            newMethodDialog.Destroy ();
+            newMethodDialog = null;
+            return null;
+        }
+
+        public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is MethodDTO) {
+            }
+        }
+
+        public Widget GetWidget () {
+            return newMethodForm["newMethodDialog"];
+        }
+
+    }
+}

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -0,0 +1,27 @@
+using System;
+using ComponentModel.Interfaces;
+using ComponentBuilder.Interfaces;
+using Gtk;
+
+namespace ComponentBuilder.Forms {
+    internal class ParameterView : IViewHandler, IGtkView {
+        internal ParameterView () {
+        }
+
+        /* Interface Implementation */
+
+        public void ClearForm () {
+        }
+
+        public IDataTransferObject GetDataForm () {
+            return null;
+        }
+
+        public void LoadDataForm (IDataTransferObject dto) {
+        }
+
+        public Widget GetWidget () {
+            return null;
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -2,6 +2,7 @@
 using ComponentModel.Interfaces;
 using ComponentBuilder.Interfaces;
 using ComponentBuilder.Forms.NodeModel;
+using ComponentBuilder.DTO;
 using Gtk;
 
 namespace ComponentBuilder.Forms {
@@ -22,6 +23,16 @@
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is ProjectDTO) {
+                ProjectDTO projectDTO = (ProjectDTO) dto;
+                ClearForm ();
+                componentNodeStore.AddNode (new ProjectNode (projectDTO));
+            }
+            else if (dto is ComponentDTO) {
+                ComponentDTO componentDTO = (ComponentDTO) dto;
+                ProjectNode projectNode = (ProjectNode) componentNodeStore.GetNode (TreePath.NewFirst ());
+                projectNode.AddChild (new ComponentNode (componentDTO)); 
+            }
         }
 
         public void ClearForm () {
@@ -29,7 +40,7 @@
         }
 
         public IDataTransferObject GetDataForm () {
-            return null;
+            return ((GenericNode)componentNodeStore.GetNode (TreePath.NewFirst ())).DataTransferObject;
         }
 
         public Widget GetWidget () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs	2005-11-09 12:52:44 UTC (rev 575)
@@ -11,7 +11,6 @@
         private ListStore listStore; 
         private Type[] tipos;
         private IList list;
-
         public ViewTableModel () {
             list = new ArrayList ();
             tipos = new Type[1];
@@ -22,18 +21,17 @@
         }
 
         public ViewTableModel (IList list) {
-            foreach (string view in list) {
+            foreach (ViewDTO view in list) {
                 this.Add (view);
             }
         }
 
-        public void Add (string view) {
-            listStore.AppendValues (view);
-            list.Add (view);
-        }
-        
         public void Add (IDataTransferObject dto) {
-            //Ojo aqui !
+            if (dto is ViewDTO) {
+                ViewDTO viewDTO = (ViewDTO) dto;
+                listStore.AppendValues (viewDTO.ViewName);
+                list.Add (viewDTO);
+            }
         }
 
         public void Clear () {
@@ -44,18 +42,8 @@
         public ListStore ListStore {
             get {return listStore;}
         }
-
-        public StringCollection ListModel {
-            get {
-                StringCollection stringCollection = new StringCollection ();
-                foreach (string view in list) {
-                    stringCollection.Add (view);
-                }
-                return stringCollection;
-            }
-        }
         
-        IList ITableModel.ListModel {
+        public IList ListModel {
             get {return list;}
         }
 

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-09 12:52:44 UTC (rev 575)
@@ -195,7 +195,7 @@
 	      <property name="visible_horizontal">True</property>
 	      <property name="visible_vertical">True</property>
 	      <property name="is_important">False</property>
-	      <signal name="clicked" handler="OnNewComponentClicked" last_modification_time="Sun, 23 Oct 2005 11:45:01 GMT"/>
+	      <signal name="clicked" handler="OnNewProjectClicked" last_modification_time="Wed, 09 Nov 2005 11:36:07 GMT"/>
 	    </widget>
 	    <packing>
 	      <property name="expand">False</property>
@@ -204,6 +204,25 @@
 	  </child>
 
 	  <child>
+	    <widget class="GtkToolButton" id="toolbutton4">
+	      <property name="visible">True</property>
+	      <property name="stock_id">gtk-add</property>
+	      <property name="visible_horizontal">True</property>
+	      <property name="visible_vertical">True</property>
+	      <property name="is_important">False</property>
+	      <signal name="clicked" handler="OnAddComponentClicked" last_modification_time="Wed, 09 Nov 2005 11:36:19 GMT"/>
+	    </widget>
+	    <packing>
+	      <property name="expand">False</property>
+	      <property name="homogeneous">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <placeholder/>
+	  </child>
+
+	  <child>
 	    <widget class="GtkToolButton" id="toolbutton2">
 	      <property name="visible">True</property>
 	      <property name="stock_id">gtk-preferences</property>
@@ -1337,7 +1356,7 @@
       </child>
 
       <child>
-	<widget class="GtkEntry" id="exceptionManangerEntry">
+	<widget class="GtkEntry" id="exceptionManagerEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-08 23:55:30 UTC (rev 574)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-09 12:52:44 UTC (rev 575)
@@ -195,7 +195,7 @@
 	      <property name="visible_horizontal">True</property>
 	      <property name="visible_vertical">True</property>
 	      <property name="is_important">False</property>
-	      <signal name="clicked" handler="OnNewComponentClicked" last_modification_time="Sun, 23 Oct 2005 11:45:01 GMT"/>
+	      <signal name="clicked" handler="OnNewProjectClicked" last_modification_time="Wed, 09 Nov 2005 11:36:07 GMT"/>
 	    </widget>
 	    <packing>
 	      <property name="expand">False</property>
@@ -204,6 +204,25 @@
 	  </child>
 
 	  <child>
+	    <widget class="GtkToolButton" id="toolbutton4">
+	      <property name="visible">True</property>
+	      <property name="stock_id">gtk-add</property>
+	      <property name="visible_horizontal">True</property>
+	      <property name="visible_vertical">True</property>
+	      <property name="is_important">False</property>
+	      <signal name="clicked" handler="OnAddComponentClicked" last_modification_time="Wed, 09 Nov 2005 11:36:19 GMT"/>
+	    </widget>
+	    <packing>
+	      <property name="expand">False</property>
+	      <property name="homogeneous">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <placeholder/>
+	  </child>
+
+	  <child>
 	    <widget class="GtkToolButton" id="toolbutton2">
 	      <property name="visible">True</property>
 	      <property name="stock_id">gtk-preferences</property>
@@ -1337,7 +1356,7 @@
       </child>
 
       <child>
-	<widget class="GtkEntry" id="exceptionManangerEntry">
+	<widget class="GtkEntry" id="exceptionManagerEntry">
 	  <property name="visible">True</property>
 	  <property name="can_focus">True</property>
 	  <property name="editable">True</property>



From nestor at berlios.de  Wed Nov  9 13:55:29 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Wed, 9 Nov 2005 13:55:29 +0100
Subject: [Mspace-checkins] r576 - BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms
Message-ID: <200511091255.jA9CtTFB018216@sheep.berlios.de>

Author: nestor
Date: 2005-11-09 13:55:26 +0100 (Wed, 09 Nov 2005)
New Revision: 576

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
Log:
Rompia al compilar.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-09 12:52:44 UTC (rev 575)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-09 12:55:26 UTC (rev 576)
@@ -101,10 +101,7 @@
 
         public void ResponseSerializeProject (ResponseMethodDTO response) {
             if (response.ExecutionSuccess) {
-                Console.WriteLine ("Project
-        }
-    }
-} has been serialized successfully");
+                Console.WriteLine ("Project serialized");
             }
         }
         



From nestor at berlios.de  Wed Nov  9 17:41:19 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Wed, 9 Nov 2005 17:41:19 +0100
Subject: [Mspace-checkins] r577 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Dto Forms Forms/TableModel
Message-ID: <200511091641.jA9GfJuY012005@sheep.berlios.de>

Author: nestor
Date: 2005-11-09 17:41:18 +0100 (Wed, 09 Nov 2005)
New Revision: 577

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/MethodTableModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ParameterTableModel.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -1,6 +1,5 @@
 using System;
 using System.Collections;
-using System.Collections.Specialized;
 using ComponentModel.Interfaces;
 
 namespace ComponentBuilder.DTO {
@@ -16,7 +15,9 @@
         private IList methodCollection;
 
         public ComponentDTO () {
-            viewCollection = new StringCollection ();
+            componentName = String.Empty;
+            classExceptionManager = String.Empty;
+            viewCollection = new ArrayList ();
             methodCollection = new ArrayList ();
         }
         

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -33,7 +33,7 @@
             methodsTreeView.AppendColumn ("Parameters", new CellRendererText (), "text", 4);
 
             //Vamos a instanciar tambi?n los modelos de las vistas.
-        
+
             viewTableModel = new ViewTableModel ();
             viewsTreeView.Model = viewTableModel.ListStore;
             methodTableModel = new MethodTableModel ();
@@ -43,7 +43,11 @@
         /* GUI Events */
         private void OnNewMethodClicked (object sender, EventArgs args) {
             methodView = new MethodView ();
+            methodView.LoadDataForm ((ComponentDTO) GetDataForm ());
             MethodDTO methodDTO = (MethodDTO) methodView.GetDataForm ();
+            if (methodDTO != null) {
+                methodTableModel.Add (methodDTO);
+            }
             methodView = null;
         }
 
@@ -65,7 +69,7 @@
                 viewTableModel = new ViewTableModel (componentDTO.ViewCollection);
                 viewsTreeView.Model = viewTableModel.ListStore;
                 methodTableModel = new MethodTableModel (componentDTO.MethodCollection);
-                methodsTreeView.Model = viewTableModel.ListStore;
+                methodsTreeView.Model = methodTableModel.ListStore;
             }
         }
 
@@ -79,7 +83,12 @@
         }
 
         public IDataTransferObject GetDataForm () {
-            return null;
+            ComponentDTO componentDTO = new ComponentDTO ();
+            componentDTO.ComponentName = componentNameEntry.Text;
+            componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
+            componentDTO.ViewCollection = viewTableModel.ListModel;
+            componentDTO.MethodCollection = methodTableModel.ListModel;
+            return componentDTO;
         }
 
         public Widget GetWidget () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -18,6 +18,7 @@
         /* Interface Implementation */
 
         public void ClearForm () {
+            viewNameEntry.Text = String.Empty;
         }
 
         public IDataTransferObject GetDataForm () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -1,6 +1,7 @@
 using System;
 using ComponentModel.Interfaces;
 using ComponentBuilder.Interfaces;
+using ComponentBuilder.Forms.TableModel;
 using ComponentBuilder.DTO;
 using Gtk;
 using Glade;
@@ -8,31 +9,79 @@
 namespace ComponentBuilder.Forms {
     internal class MethodView : IViewHandler, IGtkView {
         Glade.XML newMethodForm;
+
+        [Widget] TreeView parametersTreeView;
+        [Widget] Entry nameEntry, returnTypeEntry, responseMethodEntry;
+        [Widget] ComboBox viewToResponseCombo;
         
+        ParameterTableModel parameterTableModel;
+        ParameterView parameterView;
+
         internal MethodView () {
             newMethodForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "newMethodDialog", null);
             newMethodForm.Autoconnect (this);
+        
+            parametersTreeView.AppendColumn ("Type", new CellRendererText (), "text", 0);
+            parametersTreeView.AppendColumn ("Variable Name", new CellRendererText (), "text", 1);
+            parameterTableModel = new ParameterTableModel ();
+            parametersTreeView.Model = parameterTableModel.ListStore;
         }
 
         private void OnNewParameterClicked (object sender, EventArgs args) {
+            parameterView = new ParameterView ();
+            ParameterDTO parameterDTO = (ParameterDTO) parameterView.GetDataForm ();
+            if (parameterDTO != null) {
+                parameterTableModel.Add (parameterDTO);
+            }
+            parameterView = null;
         }
 
         /* Interface Implementation */
 
         public void ClearForm () {
+            nameEntry.Text = String.Empty;
+            returnTypeEntry.Text = String.Empty;
+            responseMethodEntry.Text = String.Empty;
+            parameterTableModel = new ParameterTableModel ();
+            TreeStore treeStore = new TreeStore (typeof (string));
+            viewToResponseCombo.Model = treeStore;
         }
 
         public IDataTransferObject GetDataForm () {
             Dialog newMethodDialog = (Dialog) GetWidget ();
-            Console.WriteLine (newMethodDialog.Run ());
+            MethodDTO methodDTO = null;
+            switch (newMethodDialog.Run ()) {
+                case (int) ResponseType.Ok :
+                    methodDTO = new MethodDTO ();
+                    methodDTO.MethodName = nameEntry.Text;
+                    methodDTO.ReturnType = returnTypeEntry.Text;
+                    TreeIter iter;
+                    viewToResponseCombo.GetActiveIter (out iter);
+                    methodDTO.ViewToResponse = (string) viewToResponseCombo.Model.GetValue (iter, 0);
+                    methodDTO.ResponseMethod = responseMethodEntry.Text;
+                    methodDTO.ParametersCollection = parameterTableModel.ListModel;
+                    break;
+                case (int) ResponseType.Cancel:
+                    break;
+                default:
+                    break;
+            }
             newMethodDialog.Destroy ();
             newMethodDialog = null;
-            return null;
+            return methodDTO;
         }
 
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is MethodDTO) {
             }
+            else if (dto is ComponentDTO) {
+                ComponentDTO componentDTO = (ComponentDTO) dto;
+                TreeStore treeStore = new TreeStore (typeof (string));
+                viewToResponseCombo.Model = treeStore;
+                foreach (ViewDTO viewDTO in componentDTO.ViewCollection) {
+                    treeStore.AppendValues (viewDTO.ViewName);
+                }
+            }
         }
 
         public Widget GetWidget () {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ParameterView.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -1,27 +1,57 @@
 using System;
 using ComponentModel.Interfaces;
 using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
 using Gtk;
+using Glade;
 
 namespace ComponentBuilder.Forms {
     internal class ParameterView : IViewHandler, IGtkView {
+        Glade.XML newParameterForm;
+        
+        [Widget] Entry typeEntry, varNameEntry;
+        
         internal ParameterView () {
+            newParameterForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "newParameterDialog", null);
+            newParameterForm.Autoconnect (this);
         }
 
         /* Interface Implementation */
 
         public void ClearForm () {
+            typeEntry.Text = String.Empty;
+            varNameEntry.Text = String.Empty;
         }
 
         public IDataTransferObject GetDataForm () {
-            return null;
+            Dialog newParameterDialog = (Dialog) newParameterForm ["newParameterDialog"];
+            ParameterDTO parameterDTO = null;
+            switch (newParameterDialog.Run ()) {
+                case (int) ResponseType.Ok:
+                    parameterDTO = new ParameterDTO ();
+                    parameterDTO.TypeName = typeEntry.Text;
+                    parameterDTO.VarName = varNameEntry.Text;
+                    break;
+                case (int) ResponseType.Cancel:
+                    break;
+                default:
+                    break;
+            }
+            newParameterDialog.Destroy ();
+            newParameterDialog = null;
+            return parameterDTO;
         }
 
         public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is ParameterDTO) {
+                ParameterDTO parameterDTO = (ParameterDTO) dto;
+                typeEntry.Text = parameterDTO.TypeName;
+                varNameEntry.Text = parameterDTO.VarName;
+            }
         }
 
         public Widget GetWidget () {
-            return null;
+            return newParameterForm ["newParameterDialog"];
         }
     }
 }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/MethodTableModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/MethodTableModel.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/MethodTableModel.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -21,7 +21,7 @@
             list = new ArrayList ();
         }
 
-        public MethodTableModel (IList list) {
+        public MethodTableModel (IList list) : this () {
             foreach (MethodDTO methodDTO in list) {
                 this.Add (methodDTO);
             }
@@ -47,7 +47,6 @@
                         methodDTO.ViewToResponse,
                         methodDTO.ResponseMethod,
                         stringBuilder.ToString ()
-                        //methodDTO.ParametersCollection.ToString ()
                         );
                 list.Add (methodDTO);
             }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ParameterTableModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ParameterTableModel.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ParameterTableModel.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -20,7 +20,7 @@
             list = new ArrayList ();
         }
 
-        public ParameterTableModel (IList list) {
+        public ParameterTableModel (IList list) : this () {
             foreach (ParameterDTO parameterDTO in list) {
                 this.Add (parameterDTO);
             }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs	2005-11-09 12:55:26 UTC (rev 576)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/TableModel/ViewTableModel.cs	2005-11-09 16:41:18 UTC (rev 577)
@@ -11,6 +11,7 @@
         private ListStore listStore; 
         private Type[] tipos;
         private IList list;
+
         public ViewTableModel () {
             list = new ArrayList ();
             tipos = new Type[1];
@@ -20,9 +21,9 @@
             listStore = new ListStore (tipos);
         }
 
-        public ViewTableModel (IList list) {
-            foreach (ViewDTO view in list) {
-                this.Add (view);
+        public ViewTableModel (IList list) : this () {
+            foreach (ViewDTO viewDTO in list) {
+                this.Add (viewDTO);
             }
         }
 



From nestor at berlios.de  Sat Nov 12 16:33:51 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Sat, 12 Nov 2005 16:33:51 +0100
Subject: [Mspace-checkins] r578 - BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms
Message-ID: <200511121533.jACFXpY6002984@sheep.berlios.de>

Author: nestor
Date: 2005-11-12 16:33:51 +0100 (Sat, 12 Nov 2005)
New Revision: 578

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
Log:
AboutDialog no existe a?\195?\186n con GTK#.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-09 16:41:18 UTC (rev 577)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-12 15:33:51 UTC (rev 578)
@@ -63,6 +63,14 @@
         }
         
         private void OnMenuAboutActivate (object sender, EventArgs args) {
+            Glade.XML aboutForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "aboutDialog", null);
+            //AboutDialog no existe todavia en GTK#.
+            //Gtk.AboutDialog aboutDialog = (Gtk.AboutDialog) aboutForm ["aboutDialog"];
+            //aboutDialog.Logo = Gdk.PixBuf.LoadFromResource ("mono-powered.png");
+            //aboutDialog.Run ();
+            //aboutDialog.Destroy ();
+            //aboutDialog = null;
+            aboutForm = null;
         }
 
         /*Toolbar*/



From nestor at berlios.de  Sun Nov 13 14:20:57 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Sun, 13 Nov 2005 14:20:57 +0100
Subject: [Mspace-checkins] r579 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Dto Forms
Message-ID: <200511131320.jADDKuDQ021281@sheep.berlios.de>

Author: nestor
Date: 2005-11-13 14:20:26 +0100 (Sun, 13 Nov 2005)
New Revision: 579

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/MethodDTO.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-12 15:33:51 UTC (rev 578)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/ComponentDTO.cs	2005-11-13 13:20:26 UTC (rev 579)
@@ -1,9 +1,12 @@
 using System;
+using System.Xml.Serialization;
 using System.Collections;
 using ComponentModel.Interfaces;
 
 namespace ComponentBuilder.DTO {
     [Serializable]
+    [XmlInclude (typeof (MethodDTO))]
+    [XmlInclude (typeof (ViewDTO))]
     public sealed class ComponentDTO : IDataTransferObject {
         //Nombre del componente
         private string componentName;

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/MethodDTO.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/MethodDTO.cs	2005-11-12 15:33:51 UTC (rev 578)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Dto/MethodDTO.cs	2005-11-13 13:20:26 UTC (rev 579)
@@ -1,9 +1,11 @@
 using System;
+using System.Xml.Serialization;
 using System.Collections;
 using ComponentModel.Interfaces;
 
 namespace ComponentBuilder.DTO {
     [Serializable]
+    [XmlInclude (typeof (ParameterDTO))]
     public sealed class MethodDTO : IDataTransferObject {
         private string returnType;
         private string methodName;

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-12 15:33:51 UTC (rev 578)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-13 13:20:26 UTC (rev 579)
@@ -38,6 +38,24 @@
         }
 
         private void OnMenuOpenActivate (object sender, EventArgs args) {
+            FileChooserDialog chooser = new FileChooserDialog ("Selecciona un fichero para abrir", (Window)mainComponentBuilderForm["mainView"], FileChooserAction.Open, Stock.Open);
+            chooser.AddButton (Stock.Open, ResponseType.Accept);
+            chooser.AddButton (Stock.Cancel, ResponseType.Cancel);
+            chooser.SelectMultiple = false;
+            ResponseType response = (ResponseType) chooser.Run ();
+            switch (response) {
+                case ResponseType.Accept:
+                    if (chooser.Filename.Length != 0) {
+                        DefaultContainer.Instance.Execute ("ComponentBuilder", "DeserializeProject", new object[]{chooser.Filename}, this);
+                    }
+                    break;
+                case ResponseType.Cancel:
+                    break;
+                default:
+                    break;
+            }
+            chooser.Destroy ();
+            chooser = null;
         }
 
         private void OnMenuSaveActivate (object sender, EventArgs args) {
@@ -56,6 +74,7 @@
                 }
             }
             chooser.Destroy ();
+            chooser = null;
         }
 
         private void OnMenuExitActivate (object sender, EventArgs args) {
@@ -84,12 +103,12 @@
         
         private void OnAddComponentClicked (object sender, EventArgs args) {
             ProjectDTO projectDTO = (ProjectDTO) projectView.GetDataForm ();
-            ComponentDTO componentDTO = new ComponentDTO ();
-            componentDTO.ComponentName = "New Component";
-            projectDTO.ComponentCollection.Add (componentDTO);
-            //Hago el refresco aqu?, expl?cito.
-            projectView.LoadDataForm (componentDTO);
-            LoadDataForm (componentDTO);
+            if (projectDTO != null) {
+                ComponentDTO componentDTO = (ComponentDTO) componentView.GetDataForm ();
+                projectDTO.ComponentCollection.Add (componentDTO);
+                LoadDataForm (projectDTO);
+                componentView.ClearForm ();
+            }
         }
 
         private void OnGenerateComponentClicked (object sender, EventArgs args) {
@@ -113,6 +132,13 @@
             }
         }
         
+        public void ResponseDeserializeProject (ResponseMethodDTO response) {
+            if (response.ExecutionSuccess) {
+                ProjectDTO projectDTO = (ProjectDTO) response.MethodResult;
+                LoadDataForm (projectDTO);
+            }
+        }
+        
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is ProjectDTO) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-12 15:33:51 UTC (rev 578)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-13 13:20:26 UTC (rev 579)
@@ -1,4 +1,5 @@
 using System;
+using ComponentModel.Container;
 using ComponentModel.Interfaces;
 using ComponentBuilder.Interfaces;
 using ComponentBuilder.Forms.NodeModel;
@@ -19,6 +20,11 @@
             componentNodeView.AppendColumn ("Project Tree", new CellRendererText (),"text", 0);
             componentScrolledWindow = new ScrolledWindow ();
             componentScrolledWindow.Add (componentNodeView);
+
+            //Event Handling
+            componentNodeView.NodeSelection.Mode = SelectionMode.Single;
+            componentNodeView.NodeSelection.Changed += new EventHandler (OnSelectionChanged);
+            
         }
         
         /* Interface Implementation */
@@ -33,18 +39,40 @@
                 ProjectNode projectNode = (ProjectNode) componentNodeStore.GetNode (TreePath.NewFirst ());
                 projectNode.AddChild (new ComponentNode (componentDTO)); 
             }
+            componentNodeView.ExpandAll ();
         }
 
         public void ClearForm () {
             componentNodeStore.Clear ();
         }
 
+        /*
+         * Retornar? el ProjectDTO del modelo de datos.
+         */
         public IDataTransferObject GetDataForm () {
-            return ((GenericNode)componentNodeStore.GetNode (TreePath.NewFirst ())).DataTransferObject;
+            if (componentNodeStore.GetNode (TreePath.NewFirst ()) != null) 
+                return ((GenericNode) componentNodeStore.GetNode (TreePath.NewFirst ())).DataTransferObject;
+            else 
+                return null;
         }
 
         public Widget GetWidget () {
             return componentScrolledWindow;
         }
+
+        private void OnSelectionChanged (object sender, EventArgs args) {
+            if (sender is NodeSelection) {
+                NodeSelection nodeSelection = (NodeSelection) sender;
+                if (nodeSelection.SelectedNode is ComponentNode) {
+                    ComponentNode componentNode = (ComponentNode) nodeSelection.SelectedNode;
+                    ComponentDTO componentDTO = (ComponentDTO) componentNode.DataTransferObject;
+                    //Ahora truco de gestion de vista.
+                    IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("ComponentBuilder");
+                    //Responder? a la vista y ejecutar? el loadDataForm de
+                    //MainComponentForm
+                    componentModel.ViewHandlerCollection[0].LoadDataForm (componentDTO);
+                }
+            }
+        }
     }
 }



From nestor at berlios.de  Mon Nov 14 10:53:36 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Mon, 14 Nov 2005 10:53:36 +0100
Subject: [Mspace-checkins] r580 - BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms
Message-ID: <200511140953.jAE9raFl025966@sheep.berlios.de>

Author: nestor
Date: 2005-11-14 10:53:33 +0100 (Mon, 14 Nov 2005)
New Revision: 580

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
Log:
Borrado y tal de vistas y methods.


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-13 13:20:26 UTC (rev 579)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 09:53:33 UTC (rev 580)
@@ -8,6 +8,8 @@
 
 namespace ComponentBuilder.Forms {
     internal class ComponentView : IViewHandler, IGtkView {
+        private static ComponentView instance;
+        
         Glade.XML componentView;
         [Widget] TreeView viewsTreeView, methodsTreeView;
         [Widget] Entry componentNameEntry, exceptionManagerEntry;
@@ -18,7 +20,7 @@
         FormView formView;
         MethodView methodView;
         
-        internal ComponentView () {
+        private ComponentView () {
             componentView = new Glade.XML (null, "MainComponentBuilderForm.glade", "table5", null);
             componentView.Autoconnect (this);
 
@@ -40,6 +42,15 @@
             methodsTreeView.Model = methodTableModel.ListStore;
         }
        
+        internal static ComponentView Instance {
+            get {
+                if (instance == null) {
+                    instance = new ComponentView ();
+                }
+                return instance;
+            }
+        }
+        
         /* GUI Events */
         private void OnNewMethodClicked (object sender, EventArgs args) {
             methodView = new MethodView ();
@@ -51,14 +62,56 @@
             methodView = null;
         }
 
+        private void OnDeleteMethodClicked (object sender, EventArgs args) {
+            TreeIter iter;
+            if (methodsTreeView.Selection.GetSelected (out iter)) {
+                string methodName = methodTableModel.ListStore.GetValue (iter, 0).ToString ();
+                MethodDTO auxMethodDTO = null;
+                foreach (MethodDTO methodDTO in methodTableModel.ListModel) {
+                    if (methodDTO.MethodName.Equals (methodName)) {
+                        auxMethodDTO = methodDTO;
+                        break;
+                    }
+                }
+                if (auxMethodDTO != null) {
+                    methodTableModel.ListModel.Remove (auxMethodDTO);
+                    methodTableModel = new MethodTableModel (methodTableModel.ListModel);
+                    methodsTreeView.Model = methodTableModel.ListStore;
+                }
+            }
+        }
+
         private void OnNewViewClicked (object sender, EventArgs args) {
             formView = new FormView ();
             ViewDTO viewDTO = (ViewDTO) formView.GetDataForm ();
-            if (viewDTO != null) {
+            if (viewDTO != null) 
                 viewTableModel.Add (viewDTO);
-            }
             formView = null;
         }
+
+        private void OnDeleteViewClicked (object sender, EventArgs args) {
+            TreeIter iter; 
+            if (viewsTreeView.Selection.GetSelected (out iter)) {
+                string viewName = viewTableModel.ListStore.GetValue (iter, 0).ToString ();
+                ViewDTO auxViewDTO = null;
+                foreach (ViewDTO viewDTO in viewTableModel.ListModel) {
+                    if (viewDTO.ViewName.Equals (viewName)) {
+                        auxViewDTO = viewDTO;
+                        break;
+                    }
+                }
+                //Siempre ser? != null
+                if (auxViewDTO != null) {
+                    viewTableModel.ListModel.Remove (auxViewDTO);
+                    viewTableModel = new ViewTableModel (viewTableModel.ListModel);
+                    viewsTreeView.Model = viewTableModel.ListStore;
+                }
+            }
+        }
+
+        private void OnClearViewsClicked (object sender, EventArgs args) {
+            viewTableModel.Clear ();
+        }
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-13 13:20:26 UTC (rev 579)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/FormView.cs	2005-11-14 09:53:33 UTC (rev 580)
@@ -43,11 +43,19 @@
 
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is ViewDTO) {
+                ViewDTO viewDTO = (ViewDTO) dto;
+                viewNameEntry.Text = viewDTO.ViewName;
             }
         }
 
         public Widget GetWidget () {
             return newViewForm ["newViewDialog"];
         }
+
+        private void OnViewNameEntryActivate (object sender, EventArgs args) {
+            Dialog dialog = (Dialog) GetWidget ();
+            dialog.Respond (ResponseType.Ok);
+            dialog = null;
+        }
     }
 }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-13 13:20:26 UTC (rev 579)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 09:53:33 UTC (rev 580)
@@ -20,9 +20,9 @@
             mainComponentBuilderForm.Autoconnect (this);
 
             //Terminamos de construir el gui.
-            projectView = new ProjectView ();
+            projectView = ProjectView.Instance;
             hpaned1.Pack1 (projectView.GetWidget (), true, true);
-            componentView = new ComponentView ();
+            componentView = ComponentView.Instance;
             hpaned1.Pack2 (componentView.GetWidget (), true, true);
             hpaned1.ShowAll ();
         }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-13 13:20:26 UTC (rev 579)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-14 09:53:33 UTC (rev 580)
@@ -8,13 +8,14 @@
 
 namespace ComponentBuilder.Forms {
     internal class ProjectView : IViewHandler, IGtkView {
-             
+        private static ProjectView instance;     
+        
         /*Contenenedor*/
         ScrolledWindow componentScrolledWindow;
         NodeView componentNodeView;
         NodeStore componentNodeStore;
         
-        internal ProjectView () {
+        private ProjectView () {
             componentNodeStore = new NodeStore (typeof (GenericNode));
             componentNodeView = new NodeView (componentNodeStore);
             componentNodeView.AppendColumn ("Project Tree", new CellRendererText (),"text", 0);
@@ -24,8 +25,16 @@
             //Event Handling
             componentNodeView.NodeSelection.Mode = SelectionMode.Single;
             componentNodeView.NodeSelection.Changed += new EventHandler (OnSelectionChanged);
-            
         }
+
+        internal static ProjectView Instance {
+            get {
+                if (instance == null) {
+                    instance = new ProjectView ();
+                }
+                return instance;
+            }
+        }
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
@@ -67,7 +76,8 @@
                     ComponentNode componentNode = (ComponentNode) nodeSelection.SelectedNode;
                     ComponentDTO componentDTO = (ComponentDTO) componentNode.DataTransferObject;
                     //Ahora truco de gestion de vista.
-                    IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("ComponentBuilder");
+                    //IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("ComponentBuilder");
+                    IComponentModel componentModel = DefaultContainer.Instance["ComponentBuilder"];
                     //Responder? a la vista y ejecutar? el loadDataForm de
                     //MainComponentForm
                     componentModel.ViewHandlerCollection[0].LoadDataForm (componentDTO);



From nestor at berlios.de  Mon Nov 14 10:53:49 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Mon, 14 Nov 2005 10:53:49 +0100
Subject: [Mspace-checkins] r581 - in ComponentModel/trunk/src: ComponentModel/Container ComponentModel/Interfaces UnitTest/Components/TestComponent UnitTest/Components/TestComponent/Bo
Message-ID: <200511140953.jAE9rnNn026015@sheep.berlios.de>

Author: nestor
Date: 2005-11-14 10:53:43 +0100 (Mon, 14 Nov 2005)
New Revision: 581

Modified:
   ComponentModel/trunk/src/ComponentModel/Container/DefaultContainer.cs
   ComponentModel/trunk/src/ComponentModel/Interfaces/IContainer.cs
   ComponentModel/trunk/src/UnitTest/Components/TestComponent/Bo/TestComponentComponentModel.cs
   ComponentModel/trunk/src/UnitTest/Components/TestComponent/TestComponentUnit.cs
Log:
Added a indexer to getComponentByName.



Modified: ComponentModel/trunk/src/ComponentModel/Container/DefaultContainer.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/Container/DefaultContainer.cs	2005-11-14 09:53:33 UTC (rev 580)
+++ ComponentModel/trunk/src/ComponentModel/Container/DefaultContainer.cs	2005-11-14 09:53:43 UTC (rev 581)
@@ -121,6 +121,12 @@
             //}
         }
 
+        public IComponentModel this [string componentName] {
+            get {
+                return GetComponentByName (componentName);
+            }
+        }
+
         public void Add (IComponentModel component) {
             componentHashtable.Add (component.ComponentModelDTO.ComponentName, component);
             logger.Info ("Registering component: " + component + " as Name: " + component.ComponentModelDTO.ComponentName);

Modified: ComponentModel/trunk/src/ComponentModel/Interfaces/IContainer.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/Interfaces/IContainer.cs	2005-11-14 09:53:33 UTC (rev 580)
+++ ComponentModel/trunk/src/ComponentModel/Interfaces/IContainer.cs	2005-11-14 09:53:43 UTC (rev 581)
@@ -23,6 +23,7 @@
 namespace ComponentModel.Interfaces {
     //Igual si extendemos de System.ComponentModel.IContainer est? bien tambi?n.
     public interface IContainer {
+        IComponentModel this [string index] {get;}
         IComponentModel GetComponentByName (string componentName);
         
         void Add (IComponentModel componentModel);

Modified: ComponentModel/trunk/src/UnitTest/Components/TestComponent/Bo/TestComponentComponentModel.cs
===================================================================
--- ComponentModel/trunk/src/UnitTest/Components/TestComponent/Bo/TestComponentComponentModel.cs	2005-11-14 09:53:33 UTC (rev 580)
+++ ComponentModel/trunk/src/UnitTest/Components/TestComponent/Bo/TestComponentComponentModel.cs	2005-11-14 09:53:43 UTC (rev 581)
@@ -26,5 +26,9 @@
             throw new Exception ("Testing exception Manager, and flags");
         }
 
+        [ComponentMethod ("UnitTest.Components.TestComponent.Form.MainTestComponentForm", "ResponseNoResponse")]
+        public void NoResponse () {
+        }
+
     }
 }

Modified: ComponentModel/trunk/src/UnitTest/Components/TestComponent/TestComponentUnit.cs
===================================================================
--- ComponentModel/trunk/src/UnitTest/Components/TestComponent/TestComponentUnit.cs	2005-11-14 09:53:33 UTC (rev 580)
+++ ComponentModel/trunk/src/UnitTest/Components/TestComponent/TestComponentUnit.cs	2005-11-14 09:53:43 UTC (rev 581)
@@ -2,6 +2,7 @@
 using ComponentModel.Container;
 using ComponentModel.Interfaces;
 using ComponentModel.DTO;
+using ComponentModel.Exceptions;
 using NUnit.Framework;
 
 namespace UnitTest.Components.TestComponent {
@@ -100,5 +101,19 @@
             Assert.AreEqual (responseMethodDTO.ExecutionSuccess, false);
             Assert.IsNull (responseMethodDTO.MethodResult);
         }
+
+        [Test]
+        [ExpectedException (typeof (MethodNotFoundException))]
+        public void MethodNotFound () {
+            IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("TestUnidad1");
+            ResponseMethodDTO response = componentModel.Execute ("NotFoundedMethod", null, false);
+        }
+
+        [Test]
+        [ExpectedException (typeof (ResponseNotFoundException))]
+        public void ResponseNotFound () {
+            IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("TestUnidad1");
+            ResponseMethodDTO response = componentModel.Execute ("NoResponse", null);
+        }
     }
 }



From nestor at berlios.de  Mon Nov 14 13:07:14 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Mon, 14 Nov 2005 13:07:14 +0100
Subject: [Mspace-checkins] r582 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Forms Resources
Message-ID: <200511141207.jAEC7E34000934@sheep.berlios.de>

Author: nestor
Date: 2005-11-14 13:07:07 +0100 (Mon, 14 Nov 2005)
New Revision: 582

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 09:53:43 UTC (rev 581)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 12:07:07 UTC (rev 582)
@@ -8,8 +8,6 @@
 
 namespace ComponentBuilder.Forms {
     internal class ComponentView : IViewHandler, IGtkView {
-        private static ComponentView instance;
-        
         Glade.XML componentView;
         [Widget] TreeView viewsTreeView, methodsTreeView;
         [Widget] Entry componentNameEntry, exceptionManagerEntry;
@@ -20,7 +18,7 @@
         FormView formView;
         MethodView methodView;
         
-        private ComponentView () {
+        internal ComponentView () {
             componentView = new Glade.XML (null, "MainComponentBuilderForm.glade", "table5", null);
             componentView.Autoconnect (this);
 
@@ -41,15 +39,6 @@
             methodTableModel = new MethodTableModel ();
             methodsTreeView.Model = methodTableModel.ListStore;
         }
-       
-        internal static ComponentView Instance {
-            get {
-                if (instance == null) {
-                    instance = new ComponentView ();
-                }
-                return instance;
-            }
-        }
         
         /* GUI Events */
         private void OnNewMethodClicked (object sender, EventArgs args) {
@@ -81,6 +70,10 @@
             }
         }
 
+        private void OnClearMethodsClicked (object sender, EventArgs args) {
+            methodTableModel.Clear ();
+        }
+
         private void OnNewViewClicked (object sender, EventArgs args) {
             formView = new FormView ();
             ViewDTO viewDTO = (ViewDTO) formView.GetDataForm ();

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 09:53:43 UTC (rev 581)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 12:07:07 UTC (rev 582)
@@ -14,15 +14,16 @@
         
         ProjectView projectView;
         ComponentView componentView;
+        PreferencesView preferencesView;
         
         public MainComponentBuilderForm () {
             mainComponentBuilderForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "mainView", null);
             mainComponentBuilderForm.Autoconnect (this);
 
             //Terminamos de construir el gui.
-            projectView = ProjectView.Instance;
+            projectView = new ProjectView ();
             hpaned1.Pack1 (projectView.GetWidget (), true, true);
-            componentView = ComponentView.Instance;
+            componentView = new ComponentView ();
             hpaned1.Pack2 (componentView.GetWidget (), true, true);
             hpaned1.ShowAll ();
         }
@@ -115,6 +116,15 @@
         }
 
         private void OnPreferencesClicked (object sender, EventArgs args) {
+            preferencesView = new PreferencesView ();
+            IComponentModel componentModel = DefaultContainer.Instance["ComponentBuilder"];
+            preferencesView.LoadDataForm ((IDataTransferObject) componentModel.GetProperty ("PreferencesDTO"));
+            PreferencesDTO preferencesDTO = (PreferencesDTO) preferencesView.GetDataForm ();
+            if (preferencesDTO != null) {
+                componentModel.SetProperty ("PreferencesDTO", preferencesDTO);
+                componentModel.Execute ("SerializePreferences", null, this);
+            }
+            preferencesView = null;
         }        
         
         /* Response Notifications */
@@ -138,6 +148,12 @@
                 LoadDataForm (projectDTO);
             }
         }
+
+        public void ResponseSerializePreferences (ResponseMethodDTO response) {
+            if (response.ExecutionSuccess) {
+                Console.WriteLine ("Serialized settings.");
+            }
+        }
         
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-14 09:53:43 UTC (rev 581)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-14 12:07:07 UTC (rev 582)
@@ -8,14 +8,13 @@
 
 namespace ComponentBuilder.Forms {
     internal class ProjectView : IViewHandler, IGtkView {
-        private static ProjectView instance;     
         
         /*Contenenedor*/
         ScrolledWindow componentScrolledWindow;
         NodeView componentNodeView;
         NodeStore componentNodeStore;
         
-        private ProjectView () {
+        internal ProjectView () {
             componentNodeStore = new NodeStore (typeof (GenericNode));
             componentNodeView = new NodeView (componentNodeStore);
             componentNodeView.AppendColumn ("Project Tree", new CellRendererText (),"text", 0);
@@ -27,15 +26,6 @@
             componentNodeView.NodeSelection.Changed += new EventHandler (OnSelectionChanged);
         }
 
-        internal static ProjectView Instance {
-            get {
-                if (instance == null) {
-                    instance = new ProjectView ();
-                }
-                return instance;
-            }
-        }
-        
         /* Interface Implementation */
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is ProjectDTO) {

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-14 09:53:43 UTC (rev 581)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-14 12:07:07 UTC (rev 582)
@@ -401,6 +401,7 @@
 	      <property name="has_frame">True</property>
 	      <property name="invisible_char">*</property>
 	      <property name="activates_default">False</property>
+	      <signal name="activate" handler="OnViewNameEntryActivate" last_modification_time="Mon, 14 Nov 2005 09:14:31 GMT"/>
 	    </widget>
 	    <packing>
 	      <property name="padding">0</property>
@@ -1436,6 +1437,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnDeleteMethodClicked" last_modification_time="Mon, 14 Nov 2005 09:45:32 GMT"/>
 	    </widget>
 	  </child>
 
@@ -1448,6 +1450,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnClearMethodsClicked" last_modification_time="Mon, 14 Nov 2005 11:39:54 GMT"/>
 	    </widget>
 	  </child>
 	</widget>
@@ -1521,6 +1524,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnDeleteViewClicked" last_modification_time="Mon, 14 Nov 2005 09:20:20 GMT"/>
 	    </widget>
 	  </child>
 
@@ -1533,6 +1537,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnClearViewsClicked" last_modification_time="Mon, 14 Nov 2005 09:41:21 GMT"/>
 	    </widget>
 	  </child>
 	</widget>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-14 09:53:43 UTC (rev 581)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-14 12:07:07 UTC (rev 582)
@@ -401,6 +401,7 @@
 	      <property name="has_frame">True</property>
 	      <property name="invisible_char">*</property>
 	      <property name="activates_default">False</property>
+	      <signal name="activate" handler="OnViewNameEntryActivate" last_modification_time="Mon, 14 Nov 2005 09:14:31 GMT"/>
 	    </widget>
 	    <packing>
 	      <property name="padding">0</property>
@@ -1436,6 +1437,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnDeleteMethodClicked" last_modification_time="Mon, 14 Nov 2005 09:45:32 GMT"/>
 	    </widget>
 	  </child>
 
@@ -1448,6 +1450,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnClearMethodsClicked" last_modification_time="Mon, 14 Nov 2005 11:39:54 GMT"/>
 	    </widget>
 	  </child>
 	</widget>
@@ -1521,6 +1524,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnDeleteViewClicked" last_modification_time="Mon, 14 Nov 2005 09:20:20 GMT"/>
 	    </widget>
 	  </child>
 
@@ -1533,6 +1537,7 @@
 	      <property name="use_stock">True</property>
 	      <property name="relief">GTK_RELIEF_NORMAL</property>
 	      <property name="focus_on_click">True</property>
+	      <signal name="clicked" handler="OnClearViewsClicked" last_modification_time="Mon, 14 Nov 2005 09:41:21 GMT"/>
 	    </widget>
 	  </child>
 	</widget>



From nestor at berlios.de  Tue Nov 15 00:41:57 2005
From: nestor at berlios.de (Néstor Salceda at BerliOS)
Date: Tue, 15 Nov 2005 00:41:57 +0100
Subject: [Mspace-checkins] r583 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Forms Resources
Message-ID: <200511142341.jAENfvBI005359@sheep.berlios.de>

Author: nestor
Date: 2005-11-15 00:41:53 +0100 (Tue, 15 Nov 2005)
New Revision: 583

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/PreferencesView.cs
Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:
Edicion de componentes.
RWX para las entidades del sistema.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 23:41:53 UTC (rev 583)
@@ -17,6 +17,8 @@
         
         FormView formView;
         MethodView methodView;
+       
+        ComponentDTO componentDTO;
         
         internal ComponentView () {
             componentView = new Glade.XML (null, "MainComponentBuilderForm.glade", "table5", null);
@@ -110,6 +112,7 @@
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is ComponentDTO) {
                 ComponentDTO componentDTO = (ComponentDTO) dto; 
+                this.componentDTO = componentDTO;
                 componentNameEntry.Text = componentDTO.ComponentName;
                 exceptionManagerEntry.Text = componentDTO.ClassExceptionManager;
                 viewTableModel = new ViewTableModel (componentDTO.ViewCollection);
@@ -117,6 +120,10 @@
                 methodTableModel = new MethodTableModel (componentDTO.MethodCollection);
                 methodsTreeView.Model = methodTableModel.ListStore;
             }
+            else {
+                //Lo ponemos en modo de creaci?n de uno nuevo.
+                this.componentDTO = null;
+            }
         }
 
         public void ClearForm () {
@@ -129,14 +136,44 @@
         }
 
         public IDataTransferObject GetDataForm () {
-            ComponentDTO componentDTO = new ComponentDTO ();
-            componentDTO.ComponentName = componentNameEntry.Text;
-            componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
-            componentDTO.ViewCollection = viewTableModel.ListModel;
-            componentDTO.MethodCollection = methodTableModel.ListModel;
-            return componentDTO;
+            if (ValidateForm ()) {
+                //Hay una referencia asociada para este componente.
+                if (this.componentDTO != null) {
+                    //Ejecuci?n del modo edici?n.
+                    this.componentDTO.ComponentName = componentNameEntry.Text;
+                    this.componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
+                    this.componentDTO.ViewCollection = viewTableModel.ListModel;
+                    this.componentDTO.MethodCollection = methodTableModel.ListModel;
+                    //Recogemos y devolvemos los nuevos datos editados.
+                    return componentDTO;
+                }
+                //No existe una referencia asociada al componentDTO.
+                else {
+                    //Creamos uno nuevo.
+                    ComponentDTO componentDTO = new ComponentDTO ();
+                    componentDTO.ComponentName = componentNameEntry.Text;
+                    componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
+                    componentDTO.ViewCollection = viewTableModel.ListModel;
+                    componentDTO.MethodCollection = methodTableModel.ListModel;
+                    return componentDTO;
+                }
+            }
+            this.componentDTO = null;
+            return null;
         }
 
+        private void OnTestClicked (object sender, EventArgs args) {
+            componentDTO = (ComponentDTO) GetDataForm ();
+        }
+        
+        private bool ValidateForm () {
+            //Diremos que un componente debe solo tener completo el nombre.
+            if (componentNameEntry.Text.Length != 0) {
+                return true;
+            }
+            return false;
+        }
+
         public Widget GetWidget () {
             return componentView["table5"];
         }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 23:41:53 UTC (rev 583)
@@ -105,8 +105,31 @@
         private void OnAddComponentClicked (object sender, EventArgs args) {
             ProjectDTO projectDTO = (ProjectDTO) projectView.GetDataForm ();
             if (projectDTO != null) {
+                //Con esta linea decimos que vamos a a?adir uno nuevo.
+                componentView.LoadDataForm (null);
                 ComponentDTO componentDTO = (ComponentDTO) componentView.GetDataForm ();
-                projectDTO.ComponentCollection.Add (componentDTO);
+                if (componentDTO != null) {
+                    projectDTO.ComponentCollection.Add (componentDTO);
+                    LoadDataForm (projectDTO);
+                    componentView.ClearForm ();
+                }
+            }
+        }
+
+        private void OnDeleteComponentClicked (object sender, EventArgs args) {
+            ComponentDTO componentDTO = (ComponentDTO) componentView.GetDataForm ();
+            if (componentDTO != null) {
+                ProjectDTO projectDTO = (ProjectDTO) projectView.GetDataForm ();
+                if (projectDTO != null) {
+                    foreach (ComponentDTO auxComponentDTO in projectDTO.ComponentCollection) {
+                        if (componentDTO.ComponentName.Equals (auxComponentDTO.ComponentName)) {
+                            //Igual se deberian a?adir m?s condiciones
+                            componentDTO = auxComponentDTO;
+                            break;
+                        }
+                    }
+                }
+                projectDTO.ComponentCollection.Remove (componentDTO);
                 LoadDataForm (projectDTO);
                 componentView.ClearForm ();
             }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MethodView.cs	2005-11-14 23:41:53 UTC (rev 583)
@@ -36,6 +36,32 @@
             parameterView = null;
         }
 
+        private void OnDeleteParameterClicked (object sender, EventArgs args) {
+            TreeIter iter;
+            if (parametersTreeView.Selection.GetSelected (out iter)) {
+                string typeName = parameterTableModel.ListStore.GetValue (iter, 0).ToString ();
+                string varName = parameterTableModel.ListStore.GetValue (iter, 1).ToString ();
+                ParameterDTO auxParameterDTO = null;
+                foreach (ParameterDTO parameterDTO in parameterTableModel.ListModel) {
+                    if (parameterDTO.TypeName.Equals (typeName)) {
+                        if (parameterDTO.VarName.Equals (varName)) {
+                            auxParameterDTO = parameterDTO;
+                            break;
+                        }
+                    }
+                }
+                if (auxParameterDTO != null) {
+                    parameterTableModel.ListModel.Remove (auxParameterDTO);
+                    parameterTableModel = new ParameterTableModel (parameterTableModel.ListModel);
+                    parametersTreeView.Model = parameterTableModel.ListStore;
+                }
+            }
+        }
+
+        private void OnClearParametersClicked (object sender, EventArgs args) {
+            parameterTableModel.Clear ();
+        }
+
         /* Interface Implementation */
 
         public void ClearForm () {

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/PreferencesView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/PreferencesView.cs	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/PreferencesView.cs	2005-11-14 23:41:53 UTC (rev 583)
@@ -0,0 +1,77 @@
+using System;
+using ComponentModel.Interfaces;
+using ComponentBuilder.Interfaces;
+using ComponentBuilder.DTO;
+using Gtk;
+using Glade;
+
+namespace ComponentBuilder.Forms {
+    internal class PreferencesView : IViewHandler, IGtkView {
+        private static PreferencesView instance;
+        Glade.XML preferencesForm;
+
+        [Widget] Entry defaultOutputPathEntry, prefixNamespaceEntry; 
+        
+        internal PreferencesView () {
+            preferencesForm = new Glade.XML (null, "MainComponentBuilderForm.glade", "preferencesDialog", null);
+            preferencesForm.Autoconnect (this);
+        }
+
+        private void OnBrowseButtonClicked (object sender, EventArgs args) {
+            FileChooserDialog chooser = new FileChooserDialog ("Select a path:", (Window)preferencesForm["preferencesDialog"], FileChooserAction.SelectFolder, Stock.Ok);
+            if (defaultOutputPathEntry.Text.Length != 0) {
+                chooser.SetCurrentFolder (defaultOutputPathEntry.Text);
+            }
+            chooser.AddButton (Stock.Ok, ResponseType.Accept);
+            ResponseType responseType = (ResponseType) chooser.Run ();
+            switch (responseType) {
+                case ResponseType.Accept:
+                    defaultOutputPathEntry.Text = chooser.CurrentFolder;
+                    break;
+                default:
+                    break;
+            }
+            chooser.Destroy ();
+        }
+
+        /* Interface Implementation */
+
+        public void ClearForm () {
+            defaultOutputPathEntry.Text = String.Empty;
+            prefixNamespaceEntry.Text = String.Empty;
+        }
+
+        public IDataTransferObject GetDataForm () {
+            Dialog preferencesDialog = (Dialog) GetWidget ();
+            PreferencesDTO preferencesDTO = null;
+            switch (preferencesDialog.Run ()) {
+                case (int) ResponseType.Ok:
+                    if (defaultOutputPathEntry.Text.Length != 0 && prefixNamespaceEntry.Text.Length != 0) {
+                        preferencesDTO = new PreferencesDTO ();
+                        preferencesDTO.OutputPath = defaultOutputPathEntry.Text;
+                        preferencesDTO.PrefixNamespace = prefixNamespaceEntry.Text;
+                    }
+                    break;
+                case (int) ResponseType.Cancel:
+                    break;
+                default:
+                    break;
+            }
+            preferencesDialog.Destroy ();
+            preferencesDialog = null;
+            return preferencesDTO;
+        }
+
+        public void LoadDataForm (IDataTransferObject dto) {
+            if (dto is PreferencesDTO) {
+                PreferencesDTO preferencesDTO = (PreferencesDTO) dto;
+                defaultOutputPathEntry.Text = preferencesDTO.OutputPath;
+                prefixNamespaceEntry.Text = preferencesDTO.PrefixNamespace;
+            }
+        }
+
+        public Widget GetWidget () {
+            return preferencesForm ["preferencesDialog"];
+        }
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade	2005-11-14 23:41:53 UTC (rev 583)
@@ -219,7 +219,18 @@
 	  </child>
 
 	  <child>
-	    <placeholder/>
+	    <widget class="GtkToolButton" id="toolbutton5">
+	      <property name="visible">True</property>
+	      <property name="stock_id">gtk-remove</property>
+	      <property name="visible_horizontal">True</property>
+	      <property name="visible_vertical">True</property>
+	      <property name="is_important">False</property>
+	      <signal name="clicked" handler="OnDeleteComponentClicked" last_modification_time="Mon, 14 Nov 2005 23:15:34 GMT"/>
+	    </widget>
+	    <packing>
+	      <property name="expand">False</property>
+	      <property name="homogeneous">True</property>
+	    </packing>
 	  </child>
 
 	  <child>
@@ -659,6 +670,7 @@
 		  <property name="use_stock">True</property>
 		  <property name="relief">GTK_RELIEF_NORMAL</property>
 		  <property name="focus_on_click">True</property>
+		  <signal name="clicked" handler="OnDeleteParameterClicked" last_modification_time="Mon, 14 Nov 2005 13:19:03 GMT"/>
 		</widget>
 	      </child>
 
@@ -671,6 +683,7 @@
 		  <property name="use_stock">True</property>
 		  <property name="relief">GTK_RELIEF_NORMAL</property>
 		  <property name="focus_on_click">True</property>
+		  <signal name="clicked" handler="OnClearParametersClicked" last_modification_time="Mon, 14 Nov 2005 13:19:44 GMT"/>
 		</widget>
 	      </child>
 	    </widget>
@@ -1658,6 +1671,26 @@
 	  <property name="y_options">expand</property>
 	</packing>
       </child>
+
+      <child>
+	<widget class="GtkButton" id="button17">
+	  <property name="visible">True</property>
+	  <property name="can_focus">True</property>
+	  <property name="label" translatable="yes">button17</property>
+	  <property name="use_underline">True</property>
+	  <property name="relief">GTK_RELIEF_NORMAL</property>
+	  <property name="focus_on_click">True</property>
+	  <signal name="clicked" handler="OnTestClicked" last_modification_time="Mon, 14 Nov 2005 23:31:40 GMT"/>
+	</widget>
+	<packing>
+	  <property name="left_attach">0</property>
+	  <property name="right_attach">1</property>
+	  <property name="top_attach">5</property>
+	  <property name="bottom_attach">6</property>
+	  <property name="x_options">fill</property>
+	  <property name="y_options"></property>
+	</packing>
+      </child>
     </widget>
   </child>
 </widget>

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-14 12:07:07 UTC (rev 582)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-14 23:41:53 UTC (rev 583)
@@ -219,7 +219,18 @@
 	  </child>
 
 	  <child>
-	    <placeholder/>
+	    <widget class="GtkToolButton" id="toolbutton5">
+	      <property name="visible">True</property>
+	      <property name="stock_id">gtk-remove</property>
+	      <property name="visible_horizontal">True</property>
+	      <property name="visible_vertical">True</property>
+	      <property name="is_important">False</property>
+	      <signal name="clicked" handler="OnDeleteComponentClicked" last_modification_time="Mon, 14 Nov 2005 23:15:34 GMT"/>
+	    </widget>
+	    <packing>
+	      <property name="expand">False</property>
+	      <property name="homogeneous">True</property>
+	    </packing>
 	  </child>
 
 	  <child>
@@ -659,6 +670,7 @@
 		  <property name="use_stock">True</property>
 		  <property name="relief">GTK_RELIEF_NORMAL</property>
 		  <property name="focus_on_click">True</property>
+		  <signal name="clicked" handler="OnDeleteParameterClicked" last_modification_time="Mon, 14 Nov 2005 13:19:03 GMT"/>
 		</widget>
 	      </child>
 
@@ -671,6 +683,7 @@
 		  <property name="use_stock">True</property>
 		  <property name="relief">GTK_RELIEF_NORMAL</property>
 		  <property name="focus_on_click">True</property>
+		  <signal name="clicked" handler="OnClearParametersClicked" last_modification_time="Mon, 14 Nov 2005 13:19:44 GMT"/>
 		</widget>
 	      </child>
 	    </widget>



From nestor at berlios.de  Mon Nov 21 10:46:22 2005
From: nestor at berlios.de (nestor at BerliOS)
Date: Mon, 21 Nov 2005 10:46:22 +0100
Subject: [Mspace-checkins] r584 - in BabuineComponentBuilder/trunk/src/ComponentBuilder: Forms Interfaces Resources
Message-ID: <200511210946.jAL9kMH6022063@sheep.berlios.de>

Author: nestor
Date: 2005-11-21 10:46:20 +0100 (Mon, 21 Nov 2005)
New Revision: 584

Added:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IViewHandlerwActionState.cs
Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
Log:
A?\195?\177adido un sistema para poder ver el estado del DTO en memoria, y la acci?\195?\179n a
realizar:
    Esto significa, que GetDataForm (); se invoca siempre y devuelve un DTO;
    pero nos puede interesar editar un DTO, entonces se cargar?\195?\161 con el
    LoadDataForm (DTO) y para pedir, antes del GetDataForm, con la propiedad
    ActionState, se conseguir?\195?\161 una u otra opci?\195?\179n.
    Si queremos crear un nuevo DTO, instanciaremos la clase DTO y crearemos el
    objeto nuevo; pero para la edici?\195?\179n conseguiremos el DTO que queremos editar
    y cambiaremos sus valores; y autom?\195?\161ticamente los cambios se deber?\195?\161n ver
    reflejados.
Ademas, las Views deber?\195?\161n contener un DTO del DTO que representan; para permitir
edici?\195?\179n, lo que ha sugerido la opci?\195?\179n de hacer varios componentes entidad con
una granularidad mucho m?\195?\161s fina, pero he descartado esa opci?\195?\179n.


Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-14 23:41:53 UTC (rev 583)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-21 09:46:20 UTC (rev 584)
@@ -7,7 +7,8 @@
 using Glade;
 
 namespace ComponentBuilder.Forms {
-    internal class ComponentView : IViewHandler, IGtkView {
+    internal class ComponentView : IViewHandler, IGtkView, IViewHandlerActionState {
+        ActionState actionState;
         Glade.XML componentView;
         [Widget] TreeView viewsTreeView, methodsTreeView;
         [Widget] Entry componentNameEntry, exceptionManagerEntry;
@@ -40,11 +41,13 @@
             viewsTreeView.Model = viewTableModel.ListStore;
             methodTableModel = new MethodTableModel ();
             methodsTreeView.Model = methodTableModel.ListStore;
+            actionState = ActionState.None;
         }
         
         /* GUI Events */
         private void OnNewMethodClicked (object sender, EventArgs args) {
             methodView = new MethodView ();
+            ActionState = ActionState.Create;
             methodView.LoadDataForm ((ComponentDTO) GetDataForm ());
             MethodDTO methodDTO = (MethodDTO) methodView.GetDataForm ();
             if (methodDTO != null) {
@@ -120,10 +123,6 @@
                 methodTableModel = new MethodTableModel (componentDTO.MethodCollection);
                 methodsTreeView.Model = methodTableModel.ListStore;
             }
-            else {
-                //Lo ponemos en modo de creaci?n de uno nuevo.
-                this.componentDTO = null;
-            }
         }
 
         public void ClearForm () {
@@ -137,32 +136,34 @@
 
         public IDataTransferObject GetDataForm () {
             if (ValidateForm ()) {
-                //Hay una referencia asociada para este componente.
-                if (this.componentDTO != null) {
-                    //Ejecuci?n del modo edici?n.
-                    this.componentDTO.ComponentName = componentNameEntry.Text;
-                    this.componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
-                    this.componentDTO.ViewCollection = viewTableModel.ListModel;
-                    this.componentDTO.MethodCollection = methodTableModel.ListModel;
-                    //Recogemos y devolvemos los nuevos datos editados.
-                    return componentDTO;
+                switch (ActionState) {
+                    case ActionState.Create:
+                        ComponentDTO componentDTO = new ComponentDTO ();
+                        componentDTO.ComponentName = componentNameEntry.Text;
+                        componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
+                        componentDTO.ViewCollection = viewTableModel.ListModel;
+                        componentDTO.MethodCollection = methodTableModel.ListModel;
+                        ActionState = ActionState.None;
+                        return componentDTO;
+                    case ActionState.Edit:
+                        this.componentDTO.ComponentName = componentNameEntry.Text;
+                        this.componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
+                        this.componentDTO.ViewCollection = viewTableModel.ListModel;
+                        this.componentDTO.MethodCollection = methodTableModel.ListModel;
+                        ActionState = ActionState.None;
+                        return this.componentDTO; 
+                    case ActionState.None:
+                        break;
+                    default:
+                        ActionState = ActionState.None;
+                        break;
                 }
-                //No existe una referencia asociada al componentDTO.
-                else {
-                    //Creamos uno nuevo.
-                    ComponentDTO componentDTO = new ComponentDTO ();
-                    componentDTO.ComponentName = componentNameEntry.Text;
-                    componentDTO.ClassExceptionManager = exceptionManagerEntry.Text;
-                    componentDTO.ViewCollection = viewTableModel.ListModel;
-                    componentDTO.MethodCollection = methodTableModel.ListModel;
-                    return componentDTO;
-                }
             }
-            this.componentDTO = null;
             return null;
         }
 
-        private void OnTestClicked (object sender, EventArgs args) {
+        private void RefreshComponent (object sender, EventArgs args) {
+            ActionState = ActionState.Edit;
             componentDTO = (ComponentDTO) GetDataForm ();
         }
         
@@ -177,5 +178,14 @@
         public Widget GetWidget () {
             return componentView["table5"];
         }
-    }
+
+        public ActionState ActionState {
+            get {
+                return actionState;
+            }
+            set{
+                actionState = value;
+            }
+        }
+    }   
 }

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-14 23:41:53 UTC (rev 583)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/MainComponentBuilderForm.cs	2005-11-21 09:46:20 UTC (rev 584)
@@ -3,6 +3,7 @@
 using ComponentModel.Interfaces;
 using ComponentModel.DTO;
 using ComponentBuilder.DTO;
+using ComponentBuilder.Interfaces;
 using Gtk;
 using Glade;
 
@@ -106,7 +107,8 @@
             ProjectDTO projectDTO = (ProjectDTO) projectView.GetDataForm ();
             if (projectDTO != null) {
                 //Con esta linea decimos que vamos a a?adir uno nuevo.
-                componentView.LoadDataForm (null);
+                //OJO AQUI!!
+                componentView.ActionState = ActionState.Create;
                 ComponentDTO componentDTO = (ComponentDTO) componentView.GetDataForm ();
                 if (componentDTO != null) {
                     projectDTO.ComponentCollection.Add (componentDTO);

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-14 23:41:53 UTC (rev 583)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ProjectView.cs	2005-11-21 09:46:20 UTC (rev 584)
@@ -13,34 +13,41 @@
         ScrolledWindow componentScrolledWindow;
         NodeView componentNodeView;
         NodeStore componentNodeStore;
-        
+        /*Model*/ 
+        ProjectDTO projectDTO;
+
         internal ProjectView () {
             componentNodeStore = new NodeStore (typeof (GenericNode));
             componentNodeView = new NodeView (componentNodeStore);
             componentNodeView.AppendColumn ("Project Tree", new CellRendererText (),"text", 0);
             componentScrolledWindow = new ScrolledWindow ();
             componentScrolledWindow.Add (componentNodeView);
-
-            //Event Handling
             componentNodeView.NodeSelection.Mode = SelectionMode.Single;
             componentNodeView.NodeSelection.Changed += new EventHandler (OnSelectionChanged);
         }
 
         /* Interface Implementation */
+
+        /*
+         * Cargar? el proyecto.
+         * Coge el ProjectDTO que le pasamos y asignamos la referencia al modelo
+         * del projectDTO.  Adem?s con ese nuevo DTO crea un nuevo Nodo y
+         * rellenar? tambi?n sus componentes.
+         */
         public void LoadDataForm (IDataTransferObject dto) {
             if (dto is ProjectDTO) {
+                //Refresca el proyecto.
                 ProjectDTO projectDTO = (ProjectDTO) dto;
+                this.projectDTO = projectDTO;
                 ClearForm ();
-                componentNodeStore.AddNode (new ProjectNode (projectDTO));
+                componentNodeStore.AddNode (new ProjectNode (this.projectDTO));
             }
-            else if (dto is ComponentDTO) {
-                ComponentDTO componentDTO = (ComponentDTO) dto;
-                ProjectNode projectNode = (ProjectNode) componentNodeStore.GetNode (TreePath.NewFirst ());
-                projectNode.AddChild (new ComponentNode (componentDTO)); 
-            }
             componentNodeView.ExpandAll ();
         }
 
+        /*
+         * Limpia el formulario.
+         */
         public void ClearForm () {
             componentNodeStore.Clear ();
         }
@@ -65,11 +72,7 @@
                 if (nodeSelection.SelectedNode is ComponentNode) {
                     ComponentNode componentNode = (ComponentNode) nodeSelection.SelectedNode;
                     ComponentDTO componentDTO = (ComponentDTO) componentNode.DataTransferObject;
-                    //Ahora truco de gestion de vista.
-                    //IComponentModel componentModel = DefaultContainer.Instance.GetComponentByName ("ComponentBuilder");
                     IComponentModel componentModel = DefaultContainer.Instance["ComponentBuilder"];
-                    //Responder? a la vista y ejecutar? el loadDataForm de
-                    //MainComponentForm
                     componentModel.ViewHandlerCollection[0].LoadDataForm (componentDTO);
                 }
             }

Added: BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IViewHandlerwActionState.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IViewHandlerwActionState.cs	2005-11-14 23:41:53 UTC (rev 583)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Interfaces/IViewHandlerwActionState.cs	2005-11-21 09:46:20 UTC (rev 584)
@@ -0,0 +1,15 @@
+using System;
+
+namespace ComponentBuilder.Interfaces {
+    internal enum ActionState {
+        Create,
+        Delete,
+        Edit,
+        Selection,
+        None
+    }
+    
+    internal interface IViewHandlerActionState {
+        ActionState ActionState {get; set;}
+    }
+}

Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-14 23:41:53 UTC (rev 583)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Resources/MainComponentBuilderForm.glade.bak	2005-11-21 09:46:20 UTC (rev 584)
@@ -1671,6 +1671,26 @@
 	  <property name="y_options">expand</property>
 	</packing>
       </child>
+
+      <child>
+	<widget class="GtkButton" id="button17">
+	  <property name="visible">True</property>
+	  <property name="can_focus">True</property>
+	  <property name="label" translatable="yes">button17</property>
+	  <property name="use_underline">True</property>
+	  <property name="relief">GTK_RELIEF_NORMAL</property>
+	  <property name="focus_on_click">True</property>
+	  <signal name="clicked" handler="OnTestClicked" last_modification_time="Mon, 14 Nov 2005 23:31:40 GMT"/>
+	</widget>
+	<packing>
+	  <property name="left_attach">0</property>
+	  <property name="right_attach">1</property>
+	  <property name="top_attach">5</property>
+	  <property name="bottom_attach">6</property>
+	  <property name="x_options">fill</property>
+	  <property name="y_options"></property>
+	</packing>
+      </child>
     </widget>
   </child>
 </widget>



From nestor at berlios.de  Mon Nov 21 10:48:03 2005
From: nestor at berlios.de (nestor at BerliOS)
Date: Mon, 21 Nov 2005 10:48:03 +0100
Subject: [Mspace-checkins] r585 - BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms
Message-ID: <200511210948.jAL9m3G2022166@sheep.berlios.de>

Author: nestor
Date: 2005-11-21 10:48:02 +0100 (Mon, 21 Nov 2005)
New Revision: 585

Modified:
   BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
Log:
Error; glade ha roto :D

Voy a parar el desarrollo de esto hasta que glade sea de nuevo funcional.



Modified: BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs
===================================================================
--- BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-21 09:46:20 UTC (rev 584)
+++ BabuineComponentBuilder/trunk/src/ComponentBuilder/Forms/ComponentView.cs	2005-11-21 09:48:02 UTC (rev 585)
@@ -162,7 +162,7 @@
             return null;
         }
 
-        private void RefreshComponent (object sender, EventArgs args) {
+        private void OnTestClicked (object sender, EventArgs args) {
             ActionState = ActionState.Edit;
             componentDTO = (ComponentDTO) GetDataForm ();
         }



From luis at berlios.de  Sat Nov 26 17:02:20 2005
From: luis at berlios.de (luis at BerliOS)
Date: Sat, 26 Nov 2005 17:02:20 +0100
Subject: [Mspace-checkins] r586 - Cronus/libmonotimer
Message-ID: <200511261602.jAQG2Ko0018965@sheep.berlios.de>

Author: luis
Date: 2005-11-26 17:02:20 +0100 (Sat, 26 Nov 2005)
New Revision: 586

Removed:
   Cronus/libmonotimer/SourcesFactory.cs
Modified:
   Cronus/libmonotimer/ISource.cs
   Cronus/libmonotimer/Project.cs
   Cronus/libmonotimer/XMLSource.cs
Log:


Modified: Cronus/libmonotimer/ISource.cs
===================================================================
--- Cronus/libmonotimer/ISource.cs	2005-11-21 09:48:02 UTC (rev 585)
+++ Cronus/libmonotimer/ISource.cs	2005-11-26 16:02:20 UTC (rev 586)
@@ -6,9 +6,10 @@
 	 * 	A XML-RPC source must implement all this functions in order to work remotely.
 	*/
 	public interface ISource {
-		SProject[] getProjects ();
+		SProject[] Projects { get; }
 		Project loadProject ();
 		void saveProject (SProject[] projects);
+		
 	}
 }
 

Modified: Cronus/libmonotimer/Project.cs
===================================================================
--- Cronus/libmonotimer/Project.cs	2005-11-21 09:48:02 UTC (rev 585)
+++ Cronus/libmonotimer/Project.cs	2005-11-26 16:02:20 UTC (rev 586)
@@ -40,9 +40,9 @@
 		private static Project instance;
 		private string name;
 		private int id;
-		[NonSerialized()]
 		private Timer timer;
 		private int counter;
+                public event EventHandler timer;
 		private static int contador = 0;
 		
 		private Project(){
@@ -93,3 +93,31 @@
 
 	}
 }
+using System;
+
+namespace libmonotimer
+{
+	/* Depending on the parameters passed to the GetObjetc function, the factory will return
+	 * the proper source.
+	 */
+
+	public class Factory {
+		
+		ISource source;
+		
+		public static ISource GetObject (string[] args) {
+			switch (args.Length) {
+				case 1:
+					source = new XMLSource ();
+					break;
+				case 3:
+					source = new RPCSource ();
+					break;
+				default:
+					source = null;
+			}
+			return source;
+		}
+
+	}
+}

Deleted: Cronus/libmonotimer/SourcesFactory.cs
===================================================================
--- Cronus/libmonotimer/SourcesFactory.cs	2005-11-21 09:48:02 UTC (rev 585)
+++ Cronus/libmonotimer/SourcesFactory.cs	2005-11-26 16:02:20 UTC (rev 586)
@@ -1,28 +0,0 @@
-using System;
-
-namespace libmonotimer
-{
-	/* Depending on the parameters passed to the GetObjetc function, the factory will return
-	 * the proper source.
-	 */
-
-	public class Factory {
-		
-		ISource source;
-		
-		public static ISource GetObject (string[] args) {
-			switch (args.Length) {
-				case 1:
-					source = new XMLSource ();
-					break;
-				case 3:
-					source = new RPCSource ();
-					break;
-				default:
-					source = null;
-			}
-			return source;
-		}
-
-	}
-}

Modified: Cronus/libmonotimer/XMLSource.cs
===================================================================
--- Cronus/libmonotimer/XMLSource.cs	2005-11-21 09:48:02 UTC (rev 585)
+++ Cronus/libmonotimer/XMLSource.cs	2005-11-26 16:02:20 UTC (rev 586)
@@ -1,4 +1,4 @@
-using System.XML;
+using System.Xml.Serilization;
 using System.IO;
 
 namespace libmonotimer
@@ -6,26 +6,28 @@
 	public class XMLSource : ISource {
 
 		string filename;
+		SProject[] projects;
 
 		public XMLSource (string filename) {
 			this.filename = filename;
-			loadProject ();
+			this.projects = this.Projects;
 		}
 
-		SProject[] getProjects () {
-			SProject[] projects;
-			XmlSerializer serializer = new XmlSerializer (projects.getType ());
-			FileStream stream = new FileStream (FileMode.Open, FileAccess.Read);
-			projects = (SProject[]) serializer.Deserialize (stream);
-			return projects;
-		}
+		public SProject[] Projects {
+			get {
+				XmlSerializer serializer = new XmlSerializer (typeof (SProject[]));
+				FileStream stream = new FileStream (FileMode.Open, FileAccess.Read);
+				projects = (SProject[]) serializer.Deserialize (stream);
+				return projects;
+			}
+		}	
 		
 		Project loadProject () {
 		
 		}
 		
 		void saveProject (SProject[] projects) {
-			XmlSerializer serializer = new XmlSerializer (projets.getType ());
+			XmlSerializer serializer = new XmlSerializer (projets.GetType ());
 			FileStream stream = new FileStream (this.filename, FileMode.Create);
 			serializer.Serialize (stream, projects);
 		}



From nestor at berlios.de  Mon Nov 28 12:23:10 2005
From: nestor at berlios.de (nestor at BerliOS)
Date: Mon, 28 Nov 2005 12:23:10 +0100
Subject: [Mspace-checkins] r587 - ComponentModel/trunk
Message-ID: <200511281123.jASBNAEl030621@sheep.berlios.de>

Author: nestor
Date: 2005-11-28 12:23:08 +0100 (Mon, 28 Nov 2005)
New Revision: 587

Modified:
   ComponentModel/trunk/ChangeLog
Log:
Version 0.2 Release.



Modified: ComponentModel/trunk/ChangeLog
===================================================================
--- ComponentModel/trunk/ChangeLog	2005-11-26 16:02:20 UTC (rev 586)
+++ ComponentModel/trunk/ChangeLog	2005-11-28 11:23:08 UTC (rev 587)
@@ -1,3 +1,9 @@
+14-11-2005 -- N?stor Salceda <nestor.salceda at gmail.com>
+    DefaultContainer:
+	Added a indexer in order to retrieve components from container.
+    IDefaultContiner:
+	IDEM
+    VERSION 0.2
 18-10-2005 -- N?stor Salceda <nestor.salceda at gmail.com>
     DefaultContainer:
 	Se bloquea la tabla hash hasta que termina de cargar todos los



From nestor at berlios.de  Mon Nov 28 12:35:08 2005
From: nestor at berlios.de (nestor at BerliOS)
Date: Mon, 28 Nov 2005 12:35:08 +0100
Subject: [Mspace-checkins] r588 - in ComponentModel/trunk/src/ComponentModel: . Factory
Message-ID: <200511281135.jASBZ8Go002634@sheep.berlios.de>

Author: nestor
Date: 2005-11-28 12:34:28 +0100 (Mon, 28 Nov 2005)
New Revision: 588

Removed:
   ComponentModel/trunk/src/ComponentModel/Factory/FactoryVO.cs
   ComponentModel/trunk/src/ComponentModel/VO/
Modified:
   ComponentModel/trunk/src/ComponentModel/AssemblyInfo.cs
Log:
Deprecate in old version.



Modified: ComponentModel/trunk/src/ComponentModel/AssemblyInfo.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/AssemblyInfo.cs	2005-11-28 11:23:08 UTC (rev 587)
+++ ComponentModel/trunk/src/ComponentModel/AssemblyInfo.cs	2005-11-28 11:34:28 UTC (rev 588)
@@ -1,12 +1,12 @@
 using System.Reflection;
 using System.Runtime.CompilerServices;
 
-[assembly: AssemblyTitle("MSpace ComponentModel")]
+[assembly: AssemblyTitle("Babuine Component Model")]
 [assembly: AssemblyDescription("A little component model and framework to write .NET components.")]
 [assembly: AssemblyConfiguration("")]
-[assembly: AssemblyCompany("MSpace")]
-[assembly: AssemblyProduct("ComponentModel")]
+[assembly: AssemblyCompany("Babuine")]
+[assembly: AssemblyProduct("Babuine Component Model")]
 [assembly: AssemblyCopyright("2005 (C) N?stor Salceda Alonso")]
 [assembly: AssemblyTrademark("")]
 [assembly: AssemblyCulture("")]
-[assembly: AssemblyVersion("0.2.*")]
+[assembly: AssemblyVersion("0.3.*")]

Deleted: ComponentModel/trunk/src/ComponentModel/Factory/FactoryVO.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/Factory/FactoryVO.cs	2005-11-28 11:23:08 UTC (rev 587)
+++ ComponentModel/trunk/src/ComponentModel/Factory/FactoryVO.cs	2005-11-28 11:34:28 UTC (rev 588)
@@ -1,49 +0,0 @@
-/*
-Babuine Component Model & Babuine Framework
-Copyright (C) 2005  N?stor Salceda Alonso
-
-This library is free software; you can redistribute it and/or
-modify it under the terms of the GNU Lesser General Public
-License as published by the Free Software Foundation; either
-version 2.1 of the License, or (at your option) any later version.
-
-This library is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-Lesser General Public License for more details.
-
-You should have received a copy of the GNU Lesser General Public
-License along with this library; if not, write to the Free Software
-Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-*/
-
-using System;
-using ComponentModel.VO;
-
-namespace ComponentModel.Factory {
-    [Obsolete ("FactoryVO is being removed at next version.  Please use FactoryDto instead.")]
-    public sealed class FactoryVO {
-        private static FactoryVO instance;
-
-        private FactoryVO () {
-        }
-
-        public static FactoryVO Instance {
-            get {
-                if (instance == null)
-                    instance = new FactoryVO ();
-                return instance;
-            }
-        }
-
-        public ComponentModelVO CreateComponentModelVO () {
-            return new ComponentModelVO ();
-        }
-
-        public ResponseMethodVO CreateResponseMethodVO () {
-            ResponseMethodVO responseMethodVO = new ResponseMethodVO ();
-            responseMethodVO.SetExecutionSuccess (false);
-            return responseMethodVO;
-        }
-    }
-}



From nestor at berlios.de  Mon Nov 28 12:40:17 2005
From: nestor at berlios.de (nestor at BerliOS)
Date: Mon, 28 Nov 2005 12:40:17 +0100
Subject: [Mspace-checkins] r589 - in ComponentModel/trunk: . src/ComponentModel src/ComponentModel/Interfaces
Message-ID: <200511281140.jASBeHZK008185@sheep.berlios.de>

Author: nestor
Date: 2005-11-28 12:40:13 +0100 (Mon, 28 Nov 2005)
New Revision: 589

Modified:
   ComponentModel/trunk/ComponentModel.build
   ComponentModel/trunk/src/ComponentModel/DefaultComponentModel.cs
   ComponentModel/trunk/src/ComponentModel/Interfaces/IComponentModel.cs
Log:
Refactor to deprecated DTO.


Modified: ComponentModel/trunk/ComponentModel.build
===================================================================
--- ComponentModel/trunk/ComponentModel.build	2005-11-28 11:34:28 UTC (rev 588)
+++ ComponentModel/trunk/ComponentModel.build	2005-11-28 11:40:13 UTC (rev 589)
@@ -60,6 +60,7 @@
     
     <!-- Compila el componente y lo guarda en bin -->
     <target name="build" depends="create-skeleton">
+        <sysinfo verbose="true" />
         <csc target="library" output="${bin}/${component_name}.dll" debug="true"
         verbose="false">
             <sources basedir="${src_component}">

Modified: ComponentModel/trunk/src/ComponentModel/DefaultComponentModel.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/DefaultComponentModel.cs	2005-11-28 11:34:28 UTC (rev 588)
+++ ComponentModel/trunk/src/ComponentModel/DefaultComponentModel.cs	2005-11-28 11:40:13 UTC (rev 589)
@@ -20,7 +20,6 @@
 using System;
 using System.Reflection;
 using ComponentModel.Interfaces;
-using ComponentModel.VO;
 using ComponentModel.DTO;
 using ComponentModel.Container;
 using ComponentModel.Container.Dao;
@@ -58,11 +57,6 @@
             get {return defaultExceptionManager;}
             set {defaultExceptionManager = value;}
         }
- 
-        //Properties}
-        public ComponentModelVO VO {
-            get {return null;}
-        }
 
         public ComponentModelDTO ComponentModelDTO {
             get {return componentModelDTO;}

Modified: ComponentModel/trunk/src/ComponentModel/Interfaces/IComponentModel.cs
===================================================================
--- ComponentModel/trunk/src/ComponentModel/Interfaces/IComponentModel.cs	2005-11-28 11:34:28 UTC (rev 588)
+++ ComponentModel/trunk/src/ComponentModel/Interfaces/IComponentModel.cs	2005-11-28 11:40:13 UTC (rev 589)
@@ -18,7 +18,6 @@
 */
 
 using System;
-using ComponentModel.VO;
 using ComponentModel.DTO;
 using ComponentModel.Collections;
 
@@ -26,8 +25,6 @@
     public delegate void VirtualMethod (ResponseMethodDTO responseMethodDTO);
     
     public interface IComponentModel {
-        [Obsolete("Property Deprecated.  Use ComponentModelDTO instead")]
-        ComponentModelVO VO {get;}
 
         ComponentModelDTO ComponentModelDTO {get;}
         VirtualMethod VirtualMethod {get; set;}



